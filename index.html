<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1122.52, initial-scale=1.0, user-scalable=no">
    <title>옥외디지털 효과 분석 보고서</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" as="style" crossorigin>
    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css');
    </style>
    <!-- Chart.js 라이브러리 -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="page-wrapper">
        <!-- 기존의 <section class="page"> 들이 이 안에 들어갑니다 -->
      </div>
    <!-- 페이지 1: 표지 (페이지 번호 없음) -->
    <section class="page page-cover">
        <div class="container">
            <div class="header-frame">
                <div class="title-section">
                    <h1 class="main-title">ADeX 효과 분석 보고서</h1>
                    <h2 class="contract-name">{{광고계약명}}</h2>
                </div>
                <div class="icon-group">
                    <img src="icon-group.png" alt="ADeX 아이콘" class="icon-image">
                </div>
            </div>
            
            <div class="footer-frame">
                <div class="info-section">
                    <div class="period-row">
                        <span class="label">광고기간 : </span>
                        <span class="date-range">
                            <span class="date">{{광고시작일}}</span>
                            <span class="separator">~</span>
                            <span class="date">{{광고종료일}}</span>
                        </span>
                        <span class="total-days">
                            <span class="parenthesis">(총</span>
                            <span class="days-number">{{운영일수}}</span>
                            <span class="days-unit">일)</span>
                        </span>
                    </div>
                    <div class="advertiser-row">
                        <span class="label">광고주명 :</span>
                        <span class="advertiser-name">{{광고주명}}</span>
                    </div>
                </div>
                <div class="issue-date">{{보고서발행일}} 발행</div>
            </div>
        </div>
    </section>

    <!-- 페이지 2: 목차 -->
    <section class="page">
        <div class="container">
            <!-- Frame 8: 상단 헤더 -->
            <div class="frame-8">
                <!-- Frame 1686563114: Breadcrumb -->
                <div class="frame-1686563114">
                    <span class="text-광고계약명">{{광고계약명}}</span>
                    <span class="text-separator">|</span>
                    <span class="text-목차">목차</span>
                </div>
                <!-- 공공 미디어 중개 플랫폼 ADeX -->
                <div class="text-platform">공공 미디어 중개 플랫폼 ADeX</div>
            </div>

            <!-- 내용 영역: 목차 카드 -->
            <div class="frame-내용영역">
                <!-- 목차 영역: 내부 컨테이너 -->
                <div class="frame-목차영역">
                    <!-- 타이틀-목차: 목차 제목 프레임 -->
                    <div class="frame-타이틀목차">
                        <h2 class="text-toc-title">목차</h2>
                    </div>
                    <!-- 목차 리스트: 섹션 컨테이너 -->
                    <div class="frame-목차리스트">
                        <h3 class="text-section-title">1. 미디어그룹 상품 및 주요 광고 성과</h3>
                        <!-- 2. 미디어그룹별 광고 효과 분석: 서브섹션 -->
                        <div class="frame-미디어그룹별광고효과분석">
                            <h4 class="text-subsection-title">2. 미디어그룹별 효과 분석</h4>
                            <ol class="text-subsection-content media-group-list">
                                <!-- 미디어그룹 리스트는 서버에서 반복문으로 동적 생성 -->
                                <!-- 정렬 규칙: 유동 대비 노출 비율순으로 정렬 (내림차순), 동일한 비율일 경우 ㄱㄴㄷ, a-z 순으로 정렬 -->
                                <!-- 
                                    예시 정렬 로직 (JavaScript):
                                    미디어그룹리스트.sort((a, b) => {
                                        // 1순위: 유동 대비 노출 비율 (내림차순)
                                        const ratioA = (a.노출인구 / a.유동인구) * 100;
                                        const ratioB = (b.노출인구 / b.유동인구) * 100;
                                        if (ratioB !== ratioA) {
                                            return ratioB - ratioA; // 내림차순
                                        }
                                        // 2순위: 동일 비율일 경우 이름순 (ㄱㄴㄷ, a-z)
                                        return a.이름.localeCompare(b.이름, 'ko');
                                    });
                                    
                                    예시 정렬 로직 (Python):
                                    sorted(미디어그룹리스트, key=lambda x: (-(x.노출인구 / x.유동인구 * 100), x.이름))
                                -->
                                <!-- Handlebars: {{#each (sortByRatio 미디어그룹리스트)}}<li>{{this.이름}}</li>{{/each}} -->
                                <!-- Jinja2: {% for item in 미디어그룹리스트|sort(attribute='노출비율', reverse=True)|sort(attribute='이름') %}<li>{{item.이름}}</li>{% endfor %} -->
                                <!-- 현재는 임시로 하나의 항목으로 표시 (서버에서 동적 생성 필요) -->
                                <li>{{미디어그룹리스트}}</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 효과 분석 안내: 하단 안내 박스 -->
            <div class="frame-효과분석안내">
                <!-- Frame 24: 헤더 -->
                <div class="frame-24">
                    <img src="icon1.svg" alt="아이콘" class="frame-icon">
                    <span class="text-info-title">효과 분석 안내</span>
                </div>
                <!-- 내용 텍스트 -->
                <p class="text-info-content">효과 분석은 공공데이터, 통신사 데이터, 모바일 OD, 자체 수집 데이터를 기반으로 한 엠앤엠네트웍스의 알고리즘 기반 AI 효과 지표 분석 결과입니다. 
                    <br>본 분석은 옥외광고표준화 얼라이언스 가이드를 준수합니다.</p>
            </div>
            
            <!-- 페이지 번호: container 기준 -->
            <div class="page-number"></div>
        </div>
    </section>

    <!-- 페이지 3: 간지 1 -->
    <section class="page page-divider">
        <div class="container container-divider">
            <div class="divider-content">
                <h1 class="divider-title">1. 미디어그룹 상품 및 주요 광고 성과</h1>
                <div class="divider-logo">
                    <img src="logo-black.png" alt="ADeX 로고" class="logo-image">
                </div>
            </div>
            <!-- 페이지 번호 -->
            <div class="page-number"></div>
        </div>
    </section>

    <!-- 페이지 4: 미디어그룹 상품 정보 -->
    <section class="page page-media-info">
        <div class="container container-media-info">
            <!-- head: 헤더 영역 (Frame 10) -->
            <div class="frame-head">
                <!-- top title: 상단 Breadcrumb -->
                <div class="frame-top-title">
                    <!-- top title: Breadcrumb 그룹 -->
                    <div class="frame-top-title-group">
                        <span class="text-광고계약명-media">{{광고계약명}}</span>
                        <span class="text-separator-media">|</span>
                        <span class="text-목차-media">미디어그룹 상품 및 주요 광고 성과</span>
                    </div>
                    <!-- adex: 공공 미디어 중개 플랫폼 ADeX -->
                    <div class="text-platform-media">공공 미디어 중개 플랫폼 ADeX</div>
                </div>
                <!-- sub title: 타이틀 영역 -->
                <div class="frame-sub-title">
                    <h1 class="text-media-title">미디어그룹 상품 정보</h1>
                    <p class="text-media-subtitle">미디어그룹 상품 및 광고 기간에 대한 정보</p>
                </div>
            </div>

            <!-- Frame 1686563146: 래퍼 프레임 -->
            <div class="frame-1686563146">
                <!-- 내용: 본문 영역 (Frame 내용) -->
                <div class="frame-내용">
                    <!-- content title: 광고 정보 헤더 -->
                    <div class="frame-content-title">
                        <h2 class="text-ad-info-title">광고 정보</h2>
                    </div>

                    <!-- table: 테이블 영역 (Frame table) -->
                    <table class="frame-table">
                        <!-- Frame 18: 첫 번째 행 -->
                        <tr class="frame-18">
                            <td class="field field-label">
                                <span class="field-text">광고주</span>
                            </td>
                            <td class="field field-value" colspan="1">
                                <span class="field-text">{{광고주명}}</span>
                            </td>
                            <td class="field field-label">
                                <span class="field-text">광고 계약명</span>
                            </td>
                            <td class="field field-value" colspan="1">
                                <span class="field-text">{{광고계약명}}</span>
                            </td>
                        </tr>

                        <!-- Frame 14: 두 번째 행 (동적 항목 반복 가능) -->
                        <!-- 서버에서 미디어그룹 상품과 미디어 정보를 반복문으로 생성 -->
                        <!-- 예시: {{#each 미디어그룹리스트}} 또는 {% for item in 미디어그룹리스트 %} -->
                        <tr class="frame-14">
                            <td class="field field-label field-tall">
                                <span class="field-text">미디어그룹 상품</span>
                            </td>
                            <!-- Frame 16: 미디어그룹 상품 값 그룹 -->
                            <td class="field field-value field-tall">
                                <!-- 동적 항목: 서버에서 반복문으로 생성 -->
                                <!-- 예시: {{#each 미디어그룹상품리스트}} -->
                                <!--   <div class="field-value-item">{{this}}</div> -->
                                <!-- {{/each}} -->
                                <div class="field-value-item">{{미디어그룹상품_1}}</div>
                                <div class="field-value-item">{{미디어그룹상품_2}}</div>
                                <div class="field-value-item">{{미디어그룹상품_3}}</div>
                            </td>
                            <td class="field field-label field-tall">
                                <div class="field-label-content">
                                    <span class="field-text">미디어 정보</span>
                                    <span class="field-text-small">(유형 / 사이즈 / *간격/ 대수)</span>
                                </div>
                            </td>
                            <!-- Frame 17: 미디어 정보 값 그룹 -->
                            <td class="field field-value field-tall">
                                <!-- 동적 항목: 서버에서 반복문으로 생성 -->
                                <!-- 미디어 정보 구조: -->
                                <!-- 1. LCD: LCD/ n "/ N대 (n은 사이즈 인치, N은 동일한 사이즈의 LCD 대 수) -->
                                <!--    예시: LCD/ 55 "/ 10대 -->
                                <!-- 2. LED: LED/ 세로 x 가로 mm/ 간격 mm/ N대 (N은 동일한 세로 x 가로, 간격의 LED 대 수) -->
                                <!--    예시: LED/ 1920 x 1080 mm/ 50 mm/ 5대 -->
                                <!-- 3. 기타: 기타/ 세로 x 가로 mm/ N대 (N은 동일한 세로 x 가로의 기타 디스플레이 대 수) -->
                                <!--    예시: 기타/ 800 x 600 mm/ 3대 -->
                                <!-- 
                                    서버 측 렌더링 예시:
                                    {{#each 미디어정보리스트}}
                                      <div class="field-value-item">
                                        {{#if (eq this.유형 "LCD")}}
                                          LCD/ {{this.사이즈}} "/ {{this.대수}}대
                                        {{else if (eq this.유형 "LED")}}
                                          LED/ {{this.세로}} x {{this.가로}} mm/ {{this.간격}} mm/ {{this.대수}}대
                                        {{else}}
                                          기타/ {{this.세로}} x {{this.가로}} mm/ {{this.대수}}대
                                        {{/if}}
                                      </div>
                                    {{/each}}
                                -->
                                <div class="field-value-item">{{미디어정보_1}}</div>
                                <div class="field-value-item">{{미디어정보_2}}</div>
                                <div class="field-value-item">{{미디어정보_3}}</div>
                            </td>
                        </tr>

                        <!-- Frame 19: 세 번째 행 -->
                        <tr class="frame-19">
                            <td class="field field-label">
                                <span class="field-text">광고 기간</span>
                            </td>
                            <td class="field field-value" colspan="1">
                                <span class="field-text">{{광고시작일}} ~ {{광고종료일}} (총 {{운영일수}}일)</span>
                            </td>
                            <td class="field field-label">
                                <span class="field-text">보고서 발행일</span>
                            </td>
                            <td class="field field-value" colspan="1">
                                <span class="field-text">{{보고서발행일}}</span>
                            </td>
                        </tr>
                    </table>

                    <!-- pitch 안내 문구: 주석 -->
                    <p class="text-pitch-note">※ 간격은 LED 미디어에 한해 기입됩니다.</p>
                </div>
            </div>

            <!-- 페이지 번호 -->
            <div class="page-number"></div>
        </div>
    </section>

    <!-- 페이지 5: 주요 광고 성과 - Ⅰ -->
    <section class="page page-media-info">
        <div class="container container-media-info">
            <!-- head: 헤더 영역 -->
            <div class="frame-head">
                <!-- top title: 상단 Breadcrumb -->
                <div class="frame-top-title">
                    <!-- top title: Breadcrumb 그룹 -->
                    <div class="frame-top-title-group">
                        <span class="text-광고계약명-media">{{광고계약명}}</span>
                        <span class="text-separator-media">|</span>
                        <span class="text-목차-media">미디어그룹 상품 및 주요 광고 성과</span>
                    </div>
                    <!-- adex: 공공 미디어 중개 플랫폼 ADeX -->
                    <div class="text-platform-media">공공 미디어 중개 플랫폼 ADeX</div>
                </div>
                <!-- sub title: 타이틀 영역 -->
                <div class="frame-sub-title">
                    <h1 class="text-media-title">주요 광고 성과 - Ⅰ</h1>
                    <p class="text-media-subtitle">광고 기간 동안 수집된 데이터 기반 미디어그룹 효과 지표</p>
                </div>
            </div>

            <!-- contents: 본문 영역 (Frame contents) -->
            <div class="frame-contents">
                <!-- 유동/ 노출 인구: Frame 유동/노출 인구 -->
                <div class="frame-유동노출인구">
                    <!-- content title: 유동 / 노출인구 헤더 -->
                    <div class="frame-content-title">
                        <h2 class="text-ad-info-title">유동 / 노출인구</h2>
                        <!-- 데이터 분석 정보 -->
                        <div class="frame-data-info">
                            <span class="data-info-text">수집 기간: {{광고시작일}} ~ {{광고종료일}} | 산출 기준: 전체 미디어그룹의 유동・노출인구 총합</span>
                        </div>
                    </div>

                    <!-- table: 유동/노출 인구 테이블 -->
                    <table class="frame-table frame-table-performance">
                        <tr class="frame-18">
                            <td class="field field-label">
                                <span class="field-text">유동인구</span>
                            </td>
                            <td class="field field-value">
                                <span class="field-text">{{유동인구}}명</span>
                            </td>
                            <td class="field field-label">
                                <span class="field-text">노출인구</span>
                            </td>
                            <td class="field field-value">
                                <span class="field-text">{{노출인구}}명</span>
                            </td>
                        </tr>
                    </table>

                    <!-- insight: 인사이트 박스 -->
                    <div class="frame-insight">
                        <!-- Auto awesome: 아이콘 -->
                        <img src="insight icon.svg" alt="인사이트 아이콘" class="insight-icon">
                        <!-- Frame 1686563118: 인사이트 텍스트 컨테이너 -->
                        <div class="frame-1686563118-insight">
                                <span>유동 대비 노출 비율은 </span>
                                <!-- Frame 1686563120: 비율 텍스트 -->
                                <span class="frame-1686563120-insight">
                                    <span class="insight-value">{{노출비율}}%</span>
                                    <span>로 </span>
                                </span>
                                <!-- Frame 1686563119: 효과 수준 텍스트 -->
                                <span class="frame-1686563119-insight">
                                    <span class="insight-highlight">{{광고효과수준}} 수준의 효과</span>
                                    <span>를 보였습니다.</span>
                                </span>
                        </div>
                    </div>
                </div>

                <!-- Frame 21: 주요 오디언스 요약 -->
                <div class="frame-21">
                    <!-- content title: 주요 오디언스 요약 헤더 -->
                    <div class="frame-content-title">
                        <h2 class="text-ad-info-title">주요 오디언스 요약</h2>
                        <!-- 데이터 분석 정보 -->
                        <div class="frame-data-info">
                            <span class="data-info-text">수집 기간: {{광고시작일}} ~ {{광고종료일}} | 산출 기준: 전체 미디어그룹의 노출인구 총합, 미디어그룹별 노출인구 총합</span>
                        </div>
                    </div>

                    <!-- Frame 23: 인사이트 컨테이너 -->
                    <div class="frame-23">
                        <!-- insight: 인사이트 박스 -->
                        <div class="frame-insight frame-insight-large">
                            <!-- Frame 24: 아이콘 + 텍스트 컨테이너 -->
                            <div class="frame-24-insight">
                                <!-- Auto awesome: 아이콘 -->
                                <img src="insight icon.svg" alt="인사이트 아이콘" class="insight-icon">
                                <!-- Frame 1686563123: 다중 줄 텍스트 컨테이너 -->
                                <div class="frame-1686563123-insight">
                                    <!-- Frame 1686563118: 첫 번째 줄 -->
                                    <div class="frame-1686563118-insight">
                                        <span>주요 오디언스 </span>
                                        <span class="insight-highlight">1위는 </span>
                                        <!-- Frame 1686563120: 1위 정보 -->
                                        <span class="frame-1686563120-insight">
                                            <span class="insight-highlight">{{오디언스1위}}</span>
                                            <span class="insight-highlight">({{오디언스1위비율}}%), </span>
                                        </span>
                                        <span class="insight-highlight">2위는 </span>
                                        <!-- Frame 1686563121: 2위 정보 -->
                                        <span class="frame-1686563121-insight">
                                            <span class="insight-highlight">{{오디언스2위}}</span>
                                            <span class="insight-highlight">({{오디언스2위비율}}%), </span>
                                        </span>
                                        <span class="insight-highlight">3위는 </span>
                                        <!-- Frame 1686563122: 3위 정보 -->
                                        <span class="frame-1686563122-insight">
                                            <span class="insight-highlight">{{오디언스3위}}</span>
                                            <span class="insight-highlight">({{오디언스3위비율}}%)</span>
                                        </span>
                                        <span>입니다.</span>
                                    </div>
                                    <!-- Frame 1686563119: 두 번째 줄 -->
                                    <div class="frame-1686563119-insight">
                                        <!-- Frame 1686563120: 오디언스 정보 -->
                                        <span class="frame-1686563120-insight">
                                            <span class="frame-1686563122-insight">
                                                <span class="insight-highlight">{{오디언스1위}}</span>
                                                <span>이 가장 많은 미디어그룹은 </span>
                                            </span>
                                        </span>
                                        <span class="insight-highlight">{{최다미디어그룹}}</span>
                                        <span>입니다.</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Frame 22: 노출인구 최다 미디어그룹 -->
                <div class="frame-22">
                    <!-- content title: 노출인구 최다 미디어그룹 헤더 -->
                    <div class="frame-content-title">
                        <h2 class="text-ad-info-title">노출인구 최다 미디어그룹</h2>
                        <!-- 데이터 분석 정보 -->
                        <div class="frame-data-info">
                            <span class="data-info-text">수집 기간: {{광고시작일}} ~ {{광고종료일}} | 산출 기준: 미디어그룹별 노출인구 총합</span>
                        </div>
                    </div>

                    <!-- Frame 23: 인사이트 컨테이너 -->
                    <div class="frame-23">
                        <!-- Frame 22: 인사이트 박스 -->
                        <div class="frame-insight">
                            <!-- Frame 24: 아이콘 + 텍스트 컨테이너 -->
                            <div class="frame-24-insight">
                                <!-- Auto awesome: 아이콘 -->
                                <img src="insight icon.svg" alt="인사이트 아이콘" class="insight-icon">
                                <!-- Frame 1686563118: 인사이트 텍스트 -->
                                <div class="frame-1686563118-insight">
                                    <span>노출인구가 가장 많은 미디어그룹은 </span>
                                    <!-- Frame 1686563120: 미디어그룹 정보 -->
                                    <span class="frame-1686563120-insight">
                                        <span class="insight-highlight">{{최다미디어그룹}}</span>
                                        <span>이며, 노출인구 수는 </span>
                                    </span>
                                    <!-- Frame 1686563121: 노출인구 수 정보 -->
                                    <span class="frame-1686563121-insight">
                                        <span class="insight-highlight">{{최다노출인구수}}명</span>
                                        <span>입니다.</span>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 페이지 번호 -->
            <div class="page-number"></div>
        </div>
    </section>

    <!-- 페이지 6: 주요 광고 성과 - Ⅱ -->
    <section class="page page-media-info">
        <div class="container container-media-info">
            <!-- head: 헤더 영역 (Frame 10) -->
            <div class="frame-head">
                <!-- top title: 상단 Breadcrumb -->
                <div class="frame-top-title">
                    <!-- top title: Breadcrumb 그룹 -->
                    <div class="frame-top-title-group">
                        <span class="text-광고계약명-media">{{광고계약명}}</span>
                        <span class="text-separator-media">|</span>
                        <span class="text-목차-media">미디어그룹 상품 및 주요 광고 성과</span>
                    </div>
                    <!-- adex: 공공 미디어 중개 플랫폼 ADeX -->
                    <div class="text-platform-media">공공 미디어 중개 플랫폼 ADeX</div>
                </div>
                <!-- sub title: 타이틀 영역 (Frame 9) -->
                <div class="frame-sub-title">
                    <h1 class="text-media-title">주요 광고 성과 - Ⅱ</h1>
                </div>
            </div>

            <!-- Frame 1686563133: 본문 영역 -->
            <div class="frame-1686563133">
                <!-- Frame 1686563131: 차트 영역 -->
                <div class="frame-1686563131">
                    <!-- Frame 21: content title -->
                    <div class="frame-content-title">
                        <h2 class="text-ad-info-title">미디어그룹 별 유동인구와 노출인구</h2>
                        <!-- 데이터 분석 정보 -->
                        <div class="frame-data-info">
                            <span class="data-info-text">수집 기간: {{광고시작일}} ~ {{광고종료일}} | 산출 기준: 유동・노출인구 총합</span>
                        </div>
                    </div>

                        <!-- Image: 차트 영역 (차트 라이브러리로 대체될 자리) -->
                        <div class="frame-chart-container" id="chart-container">
                            <canvas id="chart-canvas"></canvas>
                        </div>
                </div>

                <!-- tips: 인사이트 박스 (유사 미디어그룹 선별 안내) -->
                <div class="frame-insight frame-insight-notice">
                    <!-- tip title: 아이콘 + 제목 텍스트 -->
                    <div class="frame-24-insight frame-tip-title">
                        <!-- tip icon: 아이콘 -->
                        <img src="tips icon.svg" alt="인사이트 아이콘" class="insight-icon tip-icon">
                        <!-- 유사 미디어그룹 선별 안내: 제목 텍스트 -->
                        <span class="insight-notice-title">유사 미디어그룹 선별 안내 ({{유사미디어그룹명}})</span>
                    </div>
                    <!-- Frame 1686563118: 인사이트 텍스트 -->
                    <div class="frame-1686563118-insight frame-1686563118-notice">
                        <!-- 주요 오디언스 텍스트 -->
                        <span>주요 오디언스</span>
                        <!-- Frame 1686563120: 오디언스 정보 -->
                        <span class="frame-1686563120-insight">
                            <span class="insight-highlight">({{주요오디언스}})</span>
                        </span>
                        <!-- Frame 1686563119: 설명 텍스트 -->
                        <span class="frame-1686563119-insight">
                            <span>와 유사한 미디어그룹 중 '유동 대비 노출 비율' 이 가장 높은 상품이 선정됩니다. (해당 광고에 운영된 미디어그룹 제외)</span>
                        </span>
                    </div>
                </div>
            </div>

            <!-- 페이지 번호 -->
            <div class="page-number"></div>
        </div>
    </section>

    <!-- 페이지 7: 주요 광고 성과 - Ⅲ -->
    <section class="page page-media-info page-performance-3">
        <div class="container container-media-info">
            <!-- head: 헤더 영역 (Frame 10) -->
            <div class="frame-head">
                <!-- top title: 상단 Breadcrumb -->
                <div class="frame-top-title">
                    <!-- top title: Breadcrumb 그룹 -->
                    <div class="frame-top-title-group">
                        <span class="text-광고계약명-media">{{광고계약명}}</span>
                        <span class="text-separator-media">|</span>
                        <span class="text-목차-media">미디어그룹 상품 및 주요 광고 성과</span>
                    </div>
                    <!-- adex: 공공 미디어 중개 플랫폼 ADeX -->
                    <div class="text-platform-media">공공 미디어 중개 플랫폼 ADeX</div>
                </div>
                <!-- sub title: 타이틀 영역 (Frame 9) -->
                <div class="frame-sub-title">
                    <h1 class="text-media-title">주요 광고 성과 - Ⅲ</h1>
                    <p class="text-media-subtitle">미디어그룹 별 광고 성과 비교</p>
                </div>
            </div>

            <!-- Frame 1686563108: 본문 영역 -->
            <div class="frame-1686563108">
                <!-- Frame 20: 테이블 영역 -->
                <div class="frame-20-performance3">
                    <!-- Frame 21: content title -->
                    <div class="frame-content-title">
                        <h2 class="text-ad-info-title">미디어그룹 별 광고 성과</h2>
                        <!-- 데이터 분석 정보 -->
                        <div class="frame-data-info">
                            <span class="data-info-text">수집 기간: {{광고시작일}} ~ {{광고종료일}} | 산출 기준: 유동・노출인구 총합</span>
                        </div>
                    </div>

                    <!-- Frame 28: 테이블 -->
                    <table class="frame-table-performance3">
                        <!-- Frame 27: 테이블 헤더 -->
                        <thead>
                            <tr class="frame-27">
                                <th class="field field-label">미디어그룹명</th>
                                <th class="field field-label">유동인구</th>
                                <th class="field field-label">노출인구</th>
                                <th class="field field-label">유동 대비 노출 비율</th>
                                <th class="field field-label">CPM (노출인구 기준)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Frame 13: 일반 미디어그룹 행들 (서버에서 반복문으로 동적 생성) -->
                            <!-- 미디어그룹 수만큼 행이 동적으로 생성됩니다 -->
                            <!-- 예시: {{#each 미디어그룹리스트}} 또는 {% for item in 미디어그룹리스트 %} -->
                            <!-- 
                                서버 측 렌더링 예시 (Handlebars):
                                {{#each 미디어그룹리스트}}
                                <tr class="frame-13">
                                    <td class="field field-value">{{this.이름}}</td>
                                    <td class="field field-value">{{this.유동인구}}명</td>
                                    <td class="field field-value">{{this.노출인구}}명</td>
                                    <td class="field field-value">{{this.유동대비노출비율}}%</td>
                                    <td class="field field-value">{{this.CPM}}원</td>
                                </tr>
                                {{/each}}
                                
                                서버 측 렌더링 예시 (Jinja2):
                                {% for item in 미디어그룹리스트 %}
                                <tr class="frame-13">
                                    <td class="field field-value">{{item.이름}}</td>
                                    <td class="field field-value">{{item.유동인구}}명</td>
                                    <td class="field field-value">{{item.노출인구}}명</td>
                                    <td class="field field-value">{{item.유동대비노출비율}}%</td>
                                    <td class="field field-value">{{item.CPM}}원</td>
                                </tr>
                                {% endfor %}
                            -->
                            <!-- 현재는 임시로 하나의 행으로 표시 (서버에서 동적 생성 필요) -->
                            <tr class="frame-13">
                                <td class="field field-value">{{미디어그룹명}}</td>
                                <td class="field field-value">{{유동인구}}명</td>
                                <td class="field field-value">{{노출인구}}명</td>
                                <td class="field field-value">{{유동대비노출비율}}%</td>
                                <td class="field field-value">{{CPM}}원</td>
                            </tr>
                        </tbody>
                    </table>

                    <!-- Frame 29: 유사 미디어그룹 헤더 -->
                    <div class="frame-29">
                        <div class="field field-label frame-29-field">유사 미디어그룹</div>
                    </div>

                    <!-- Frame 28: 유사 미디어그룹 테이블 -->
                    <table class="frame-table-performance3 frame-table-similar">
                        <tbody>
                            <!-- Frame 14: 유사 미디어그룹 행 1 - 주요 오디언스가 유사한 -->
                            <!-- 서버에서 값이 없으면 invisible 처리: style="display: none;" 또는 class="invisible" 추가 -->
                            <!-- 예시: {{#if 주요오디언스유사미디어그룹}} 또는 {% if 주요오디언스유사미디어그룹 %} -->
                            <!-- 서버 측에서 조건부로 렌더링하거나, 값이 없으면 style="display: none;" 또는 class="invisible" 추가 -->
                            <tr class="frame-14-similar similar-audience">
                                <!-- Frame 16: 미디어그룹명 (2줄) -->
                                <td class="field field-value field-tall-similar">
                                    <div class="field-value-item-similar">
                                        <div class="field-text-small-similar">주요 오디언스가 유사한</div>
                                        <div class="field-text-normal">{{주요오디언스유사미디어그룹명}}</div>
                                    </div>
                                </td>
                                <td class="field field-value">{{주요오디언스유사미디어그룹유동인구}}명</td>
                                <td class="field field-value">{{주요오디언스유사미디어그룹노출인구}}명</td>
                                <td class="field field-value">{{주요오디언스유사미디어그룹유동대비노출비율}}%</td>
                                <td class="field field-value">{{주요오디언스유사미디어그룹CPM}}원</td>
                            </tr>
                            <!-- 서버 측 렌더링 예시 (Handlebars):
                                {{#if 주요오디언스유사미디어그룹}}
                                <tr class="frame-14-similar similar-audience">
                                    <td class="field field-value field-tall-similar">
                                        <div class="field-value-item-similar">
                                            <div class="field-text-small-similar">주요 오디언스가 유사한</div>
                                            <div class="field-text-normal">{{주요오디언스유사미디어그룹.이름}}</div>
                                        </div>
                                    </td>
                                    <td class="field field-value">{{주요오디언스유사미디어그룹.유동인구}}명</td>
                                    <td class="field field-value">{{주요오디언스유사미디어그룹.노출인구}}명</td>
                                    <td class="field field-value">{{주요오디언스유사미디어그룹.유동대비노출비율}}%</td>
                                    <td class="field field-value">{{주요오디언스유사미디어그룹.CPM}}원</td>
                                </tr>
                                {{/if}}
                                
                                서버 측 렌더링 예시 (Jinja2):
                                {% if 주요오디언스유사미디어그룹 %}
                                <tr class="frame-14-similar similar-audience">
                                    <td class="field field-value field-tall-similar">
                                        <div class="field-value-item-similar">
                                            <div class="field-text-small-similar">주요 오디언스가 유사한</div>
                                            <div class="field-text-normal">{{주요오디언스유사미디어그룹.이름}}</div>
                                        </div>
                                    </td>
                                    <td class="field field-value">{{주요오디언스유사미디어그룹.유동인구}}명</td>
                                    <td class="field field-value">{{주요오디언스유사미디어그룹.노출인구}}명</td>
                                    <td class="field field-value">{{주요오디언스유사미디어그룹.유동대비노출비율}}%</td>
                                    <td class="field field-value">{{주요오디언스유사미디어그룹.CPM}}원</td>
                                </tr>
                                {% endif %}
                            -->
                        </tbody>
                    </table>
                </div>

                <!-- tips: 인사이트 박스 (유사 미디어그룹 선별 안내) -->
                <div class="frame-insight frame-insight-notice">
                    <!-- tip title: 아이콘 + 제목 텍스트 -->
                    <div class="frame-24-insight frame-tip-title">
                        <!-- tip icon: 아이콘 -->
                        <img src="tips icon.svg" alt="인사이트 아이콘" class="insight-icon tip-icon">
                        <!-- 유사 미디어그룹 선별 안내: 제목 텍스트 -->
                        <span class="insight-notice-title">유사 미디어그룹 선별 안내 ({{유사미디어그룹명}})</span>
                    </div>
                    <!-- Frame 1686563118: 인사이트 텍스트 -->
                    <div class="frame-1686563118-insight frame-1686563118-notice">
                        <!-- 주요 오디언스 텍스트 -->
                        <span>주요 오디언스</span>
                        <!-- Frame 1686563120: 오디언스 정보 -->
                        <span class="frame-1686563120-insight">
                            <span class="insight-highlight">({{주요오디언스}})</span>
                        </span>
                        <span>와 </span>
                        <!-- Frame 1686563119: 설명 텍스트 -->
                        <span class="frame-1686563119-insight">
                            <span>유사한 미디어그룹 중 '유동 대비 노출 비율' 이 가장 높은 상품이 선정됩니다. (해당 광고에 운영된 미디어그룹 제외)</span>
                        </span>
                    </div>
                </div>

                <!-- CPM 계산 공식 안내 -->
                <div class="frame-cpm-formula">
                    <span class="cpm-formula-text">주요 오디언스가 동일한 미디어그룹의 CPM = [(해당 미디어그룹의 일 기준 대표 광고료 × 광고 기간 일 수) ÷ 광고 기간동안의 노출인구 수] × 1,000</span>
                </div>
            </div>

            <!-- 페이지 번호 -->
            <div class="page-number"></div>
        </div>
    </section>

    <!-- 페이지 8: 주요 광고 성과 - Ⅳ (인구 피라미드) -->
    <section class="page page-media-info page-performance-4">
        <div class="container container-media-info">
            <!-- head: 헤더 영역 (Frame 10) -->
            <div class="frame-head">
                <!-- top title: 상단 Breadcrumb -->
                <div class="frame-top-title">
                    <!-- top title: Breadcrumb 그룹 -->
                    <div class="frame-top-title-group">
                        <span class="text-광고계약명-media">{{광고계약명}}</span>
                        <span class="text-separator-media">|</span>
                        <span class="text-목차-media">미디어그룹 상품 및 주요 광고 성과</span>
                    </div>
                    <!-- adex: 공공 미디어 중개 플랫폼 ADeX -->
                    <div class="text-platform-media">공공 미디어 중개 플랫폼 ADeX</div>
                </div>
                <!-- sub title: 타이틀 영역 (Frame 9) -->
                <div class="frame-sub-title">
                    <h1 class="text-media-title">주요 광고 성과 - Ⅳ</h1>
                </div>
            </div>

            <!-- Frame 1686563108: 본문 영역 -->
            <div class="frame-1686563108 frame-1686563108-performance4-pyramid">
                <!-- Frame 20: 차트 영역 -->
                <div class="frame-20-performance4-pyramid">
                    <!-- Frame 21: content title -->
                    <div class="frame-content-title">
                        <h2 class="text-ad-info-title">연령・성별 분포 비교</h2>
                        <!-- 데이터 분석 정보 -->
                        <div class="frame-data-info">
                            <span class="data-info-text">수집 기간: {{광고시작일}} ~ {{광고종료일}} | 산출 기준: 미디어그룹별 노출인구 총합</span>
                        </div>
                    </div>

                    <!-- Frame 1686563136: 차트 영역 -->
                    <div class="frame-1686563136-pyramid">
                        <!-- 여러 미디어그룹 비교 차트 컨테이너 -->
                        <div class="frame-pyramid-comparison-container" id="pyramid-comparison-container">
                            <!-- 각 미디어그룹별 차트가 동적으로 생성됩니다 -->
                            <!-- 서버에서 미디어그룹 리스트를 반복문으로 생성 -->
                            <!-- 예시: {{#each 미디어그룹리스트}} 또는 {% for item in 미디어그룹리스트 %} -->
                        </div>

                        <!-- Container: 범례 영역 -->
                        <div class="frame-1686563137">
                            <div class="legend-item">
                                <div class="legend-icon legend-male"></div>
                                <span class="legend-text">남성</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-icon legend-female"></div>
                                <span class="legend-text">여성</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 페이지 번호 -->
            <div class="page-number"></div>
        </div>
    </section>

    <!-- 페이지 9: 주요 광고 성과 - Ⅳ-2 (일별 노출인구 비교) -->
    <section class="page page-media-info page-performance-4-2">
        <div class="container container-media-info">
            <!-- head: 헤더 영역 (Frame 10) -->
            <div class="frame-head">
                <!-- top title: 상단 Breadcrumb -->
                <div class="frame-top-title">
                    <!-- top title: Breadcrumb 그룹 -->
                    <div class="frame-top-title-group">
                        <span class="text-광고계약명-media">{{광고계약명}}</span>
                        <span class="text-separator-media">|</span>
                        <span class="text-목차-media">미디어그룹 상품 및 주요 광고 성과</span>
                    </div>
                    <!-- adex: 공공 미디어 중개 플랫폼 ADeX -->
                    <div class="text-platform-media">공공 미디어 중개 플랫폼 ADeX</div>
                </div>
                <!-- sub title: 타이틀 영역 (Frame 9) -->
                <div class="frame-sub-title">
                    <h1 class="text-media-title">주요 광고 성과 - Ⅳ</h1>
                </div>
            </div>

            <!-- Frame 1686563108: 본문 영역 -->
            <div class="frame-1686563108 frame-1686563108-performance4-2">
                <!-- Frame 20: 차트 영역 -->
                <div class="frame-20-performance4-2">
                    <!-- Frame 21: content title -->
                    <div class="frame-content-title">
                        <h2 class="text-ad-info-title">일별 노출인구 비교</h2>
                        <!-- 데이터 분석 정보 -->
                        <div class="frame-data-info">
                            <span class="data-info-text">수집 기간: {{광고시작일}} ~ {{광고종료일}} | 산출 기준: 미디어그룹별 일별 노출인구</span>
                        </div>
                    </div>

                    <!-- Frame 1686563136: 차트 영역 -->
                    <div class="frame-1686563136-daily">
                        <!-- 총합이 가장 많은 날의 값 표시 -->
                        <div class="daily-chart-max-value" id="daily-chart-max-value"></div>
                        
                        <!-- 차트 컨테이너 -->
                        <div class="frame-chart-container-daily" id="chart-container-daily">
                            <canvas id="chart-canvas-daily"></canvas>
                        </div>

                        <!-- Container: 범례 영역 -->
                        <div class="frame-1686563137-daily">
                            <!-- 범례가 동적으로 생성됩니다 -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- 페이지 번호 -->
            <div class="page-number"></div>
        </div>
    </section>

    <!-- 페이지 10: 주요 광고 성과 - Ⅳ-3 (요일별 노출인구 비교) -->
    <section class="page page-media-info page-performance-4-3">
        <div class="container container-media-info">
            <!-- head: 헤더 영역 (Frame 10) -->
            <div class="frame-head">
                <!-- top title: 상단 Breadcrumb -->
                <div class="frame-top-title">
                    <!-- top title: Breadcrumb 그룹 -->
                    <div class="frame-top-title-group">
                        <span class="text-광고계약명-media">{{광고계약명}}</span>
                        <span class="text-separator-media">|</span>
                        <span class="text-목차-media">미디어그룹 상품 및 주요 광고 성과</span>
                    </div>
                    <!-- adex: 공공 미디어 중개 플랫폼 ADeX -->
                    <div class="text-platform-media">공공 미디어 중개 플랫폼 ADeX</div>
                </div>
                <!-- sub title: 타이틀 영역 (Frame 9) -->
                <div class="frame-sub-title">
                    <h1 class="text-media-title">주요 광고 성과 - Ⅳ</h1>
                </div>
            </div>

            <!-- Frame 1686563108: 본문 영역 -->
            <div class="frame-1686563108 frame-1686563108-performance4-3">
                <!-- Frame 20: 차트 영역 -->
                <div class="frame-20-performance4-3">
                    <!-- Frame 21: content title -->
                    <div class="frame-content-title">
                        <h2 class="text-ad-info-title">요일별 노출인구 비교</h2>
                        <!-- 데이터 분석 정보 -->
                        <div class="frame-data-info">
                            <span class="data-info-text">수집 기간: {{광고시작일}} ~ {{광고종료일}} | 산출 기준: 미디어그룹별 요일별 일 평균 노출인구</span>
                        </div>
                    </div>

                    <!-- Frame 1686563139: 차트 영역 -->
                    <div class="frame-1686563139-weekly">
                        <!-- 총합이 가장 많은 요일의 값 표시 -->
                        <div class="weekly-chart-max-value" id="weekly-chart-max-value"></div>
                        
                        <!-- 차트 컨테이너 -->
                        <div class="frame-chart-container-weekly" id="chart-container-weekly">
                            <canvas id="chart-canvas-weekly"></canvas>
                        </div>

                        <!-- Container: 범례 영역 -->
                        <div class="frame-1686563137-weekly">
                            <!-- 범례가 동적으로 생성됩니다 -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- 페이지 번호 -->
            <div class="page-number"></div>
        </div>
    </section>

    <!-- 페이지 11: 주요 광고 성과 - Ⅳ-4 (시간대별 노출인구 비교) -->
    <section class="page page-media-info page-performance-4-4">
        <div class="container container-media-info">
            <!-- head: 헤더 영역 (Frame 10) -->
            <div class="frame-head">
                <!-- top title: 상단 Breadcrumb -->
                <div class="frame-top-title">
                    <!-- top title: Breadcrumb 그룹 -->
                    <div class="frame-top-title-group">
                        <span class="text-광고계약명-media">{{광고계약명}}</span>
                        <span class="text-separator-media">|</span>
                        <span class="text-목차-media">미디어그룹 상품 및 주요 광고 성과</span>
                    </div>
                    <!-- adex: 공공 미디어 중개 플랫폼 ADeX -->
                    <div class="text-platform-media">공공 미디어 중개 플랫폼 ADeX</div>
                </div>
                <!-- sub title: 타이틀 영역 (Frame 9) -->
                <div class="frame-sub-title">
                    <h1 class="text-media-title">주요 광고 성과 - Ⅳ</h1>
                </div>
            </div>

            <!-- Frame 1686563108: 본문 영역 -->
            <div class="frame-1686563108 frame-1686563108-performance4-4">
                <!-- Frame 20: 차트 영역 -->
                <div class="frame-20-performance4-4">
                    <!-- Frame 21: content title -->
                    <div class="frame-content-title">
                        <h2 class="text-ad-info-title">시간대별 노출인구 비교</h2>
                        <!-- 데이터 분석 정보 -->
                        <div class="frame-data-info">
                            <span class="data-info-text">수집 기간: {{광고시작일}} ~ {{광고종료일}}, 09시 ~ 22시 | 산출 기준: 미디어그룹별 시간대별 평균 노출인구</span>
                        </div>
                    </div>

                    <!-- Frame 차트 영역 -->
                    <div class="frame-1686563139-hourly">
                        <!-- 총합이 가장 많은 시간대의 값 표시 -->
                        <div class="hourly-chart-max-value" id="hourly-chart-max-value"></div>
                        
                        <!-- 차트 컨테이너 -->
                        <div class="frame-chart-container-hourly" id="chart-container-hourly">
                            <canvas id="chart-canvas-hourly"></canvas>
                        </div>

                        <!-- Container: 범례 영역 -->
                        <div class="frame-1686563137-hourly">
                            <!-- 범례가 동적으로 생성됩니다 -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- 페이지 번호 -->
            <div class="page-number"></div>
        </div>
    </section>

    <!-- 페이지 12: 간지 2 (미디어그룹별 효과 분석) -->
    <section class="page page-divider">
        <div class="container container-divider">
            <div class="divider-content">
                <h1 class="divider-title">2. 미디어그룹별 효과 분석</h1>
                <!-- 분석 미디어그룹 목록 컨테이너 -->
                <div class="divider-media-group-container">
                    <!-- 분석 미디어그룹 목록 제목 -->
                    <div class="divider-media-group-title-frame">
                        <span class="divider-media-group-title">분석 미디어그룹 목록</span>
                    </div>
                    <!-- 미디어그룹 목록 -->
                    <div class="divider-media-group-list" id="divider-media-group-list">
                        <!-- 미디어그룹 목록이 동적으로 생성됩니다 -->
                        <!-- 서버에서 정렬된 미디어그룹 리스트를 반복문으로 생성 -->
                        <!-- 정렬 규칙: 유동 대비 노출 비율 높은순, 동일한 비율일 경우 ㄱㄴㄷ, a-z 순 -->
                    </div>
                </div>
                <div class="divider-logo">
                    <img src="logo-black.png" alt="ADeX 로고" class="logo-image">
                </div>
            </div>
            <!-- 페이지 번호 -->
            <div class="page-number"></div>
        </div>
    </section>

    <script>
        // frame-20-performance3 높이 감지 및 페이지 분할 처리
        function handlePerformance3PageBreak() {
            const frame20Elements = document.querySelectorAll('.frame-20-performance3');
            frame20Elements.forEach((frame20) => {
                // frame20의 실제 높이 계산
                const rect = frame20.getBoundingClientRect();
                const actualHeight = rect.height;
                
                // 349px 이상이면 페이지 분할 처리
                if (actualHeight >= 349) {
                    // frame-20-performance3에 클래스 추가하여 스타일 적용
                    frame20.classList.add('frame-20-performance3-extended');
                    
                    // 페이지 분할을 위한 처리
                    // CSS에서 max-height를 제거하고 page-break를 적용
                    frame20.style.maxHeight = 'none';
                    frame20.style.pageBreakInside = 'auto';
                    frame20.style.breakInside = 'auto';
                }
            });
        }
        
        // 페이지 로드 후 및 리사이즈 시 실행
        window.addEventListener('load', handlePerformance3PageBreak);
        window.addEventListener('resize', handlePerformance3PageBreak);
        
        // 미디어그룹 별 유동인구와 노출인구 차트
        // 서버 측에서 템플릿 변수를 실제 데이터로 치환해야 합니다
        const ctx = document.getElementById('chart-canvas');
        if (ctx) {
            // 서버 측 템플릿 엔진이 렌더링 시 실제 데이터로 치환됩니다
            // 미디어그룹 리스트는 서버에서 동적으로 생성됩니다
            // 예시 구조:
            // const 미디어그룹리스트 = [
            //     { 이름: '강남역 2호선 지하철 광고', 유동인구: 1300, 노출인구: 1700, 유사미디어그룹: false },
            //     { 이름: '시청역 빌딩', 유동인구: 1200, 노출인구: 800, 유사미디어그룹: false },
            //     { 이름: '홍대입구역 빌딩', 유동인구: 1600, 노출인구: 900, 유사미디어그룹: false },
            //     { 이름: '이대역 빌딩', 유동인구: 1100, 노출인구: 1400, 유사미디어그룹: true }
            // ];
            
            // 서버 측에서 미디어그룹 리스트를 JavaScript 배열로 렌더링
            // Handlebars 예시: const 미디어그룹리스트 = [{{#each 미디어그룹리스트}}{이름: '{{this.이름}}', 유동인구: {{this.유동인구}}, 노출인구: {{this.노출인구}}, 유사미디어그룹: {{this.유사미디어그룹}}}{{#unless @last}},{{/unless}}{{/each}}];
            // Jinja2 예시: const 미디어그룹리스트 = [{% for item in 미디어그룹리스트 %}{이름: '{{item.이름}}', 유동인구: {{item.유동인구}}, 노출인구: {{item.노출인구}}, 유사미디어그룹: {{item.유사미디어그룹|lower}}}{% if not loop.last %},{% endif %}{% endfor %}];
            
            // 임시 데이터 (서버에서 위의 템플릿으로 치환)
            const 미디어그룹리스트 = [
                { 이름: '강남역 2호선 지하철 광고', 유동인구: 1300, 노출인구: 1700, 유사미디어그룹: false },
                { 이름: '시청역 빌딩', 유동인구: 1200, 노출인구: 800, 유사미디어그룹: false },
                { 이름: '홍대입구역 빌딩', 유동인구: 1600, 노출인구: 900, 유사미디어그룹: false },
                { 이름: '이대역 빌딩', 유동인구: 1100, 노출인구: 1400, 유사미디어그룹: true }
            ];
            
            // 미디어그룹 목록 정렬 함수 (유동 대비 노출 비율순 내림차순, 동일한 비율일 경우 이름순)
            function 정렬된미디어그룹리스트(리스트) {
                return 리스트.slice().sort((a, b) => {
                    // 1순위: 유동 대비 노출 비율 (내림차순)
                    const ratioA = (a.노출인구 / a.유동인구) * 100;
                    const ratioB = (b.노출인구 / b.유동인구) * 100;
                    if (ratioB !== ratioA) {
                        return ratioB - ratioA; // 내림차순
                    }
                    // 2순위: 동일 비율일 경우 이름순 (ㄱㄴㄷ, a-z)
                    return a.이름.localeCompare(b.이름, 'ko');
                });
            }
            
            // 목차 섹션에 미디어그룹 목록 동적 생성
            function 목차미디어그룹목록생성() {
                const mediaGroupList = document.querySelector('.media-group-list');
                if (mediaGroupList && 미디어그룹리스트 && 미디어그룹리스트.length > 0) {
                    // 기존 내용 제거 (템플릿 변수 제거)
                    mediaGroupList.innerHTML = '';
                    
                    // 정렬된 미디어그룹 리스트
                    const 정렬된리스트 = 정렬된미디어그룹리스트(미디어그룹리스트);
                    
                    // 각 미디어그룹을 li 요소로 생성
                    정렬된리스트.forEach((item) => {
                        const li = document.createElement('li');
                        li.textContent = item.이름;
                        mediaGroupList.appendChild(li);
                    });
                }
            }
            
            // Divider 섹션에 미디어그룹 목록 동적 생성
            function divider미디어그룹목록생성() {
                const dividerList = document.getElementById('divider-media-group-list');
                if (dividerList && 미디어그룹리스트 && 미디어그룹리스트.length > 0) {
                    // 기존 내용 제거
                    dividerList.innerHTML = '';
                    
                    // 정렬된 미디어그룹 리스트
                    const 정렬된리스트 = 정렬된미디어그룹리스트(미디어그룹리스트);
                    
                    // 각 미디어그룹을 요소로 생성 (알파벳 접두사 포함)
                    정렬된리스트.forEach((item, index) => {
                        const div = document.createElement('div');
                        div.className = 'divider-media-group-item';
                        // 알파벳 접두사 추가 (a., b., c., ...)
                        const alphabet = String.fromCharCode(97 + index); // 97은 'a'의 ASCII 코드
                        div.textContent = `${alphabet}. ${item.이름}`;
                        dividerList.appendChild(div);
                    });
                }
            }
            
            // 동적으로 labels, data, colors 생성
            const labels = 미디어그룹리스트.map(item => item.이름);
            const 유동인구데이터 = 미디어그룹리스트.map(item => item.유동인구);
            const 노출인구데이터 = 미디어그룹리스트.map(item => item.노출인구);
            
            // 색상 설정: 일반 미디어그룹은 기본 색상, 유사 미디어그룹은 연한 색상
            const 유동인구배경색 = 미디어그룹리스트.map(item => item.유사미디어그룹 ? '#B0D0F0' : '#7FECD3');
            const 노출인구배경색 = 미디어그룹리스트.map(item => item.유사미디어그룹 ? '#90E6B3' : '#00CF75');
            
            // Y축 최대값 동적 계산 (최대값의 1.2배로 설정, 500 단위로 반올림)
            const maxValue = Math.max(...유동인구데이터, ...노출인구데이터);
            const yAxisMax = Math.ceil(maxValue * 1.2 / 500) * 500;
            
            const chartData = {
                labels: labels,
                datasets: [
                    {
                        label: '유동인구',
                        data: 유동인구데이터,
                        backgroundColor: 유동인구배경색,
                        borderColor: 유동인구배경색,
                        borderWidth: 0,
                        borderRadius: 4, // 둥근 상단
                        borderSkipped: false
                    },
                    {
                        label: '노출인구',
                        data: 노출인구데이터,
                        backgroundColor: 노출인구배경색,
                        borderColor: 노출인구배경색,
                        borderWidth: 0,
                        borderRadius: 4, // 둥근 상단
                        borderSkipped: false
                    }
                ]
            };

            new Chart(ctx, {
                type: 'bar',
                data: chartData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true, // 범례 표시
                            position: 'bottom', // 범례를 하단으로
                            align: 'center',
                            labels: {
                                usePointStyle: false,
                                padding: 20,
                                font: {
                                    family: 'Pretendard',
                                    size: 10,
                                    weight: 400
                                },
                                color: '#757575',
                                generateLabels: function(chart) {
                                    const original = Chart.defaults.plugins.legend.labels.generateLabels;
                                    const labels = original.call(this, chart);
                                    // 범례 색상 설정
                                    labels.forEach((label, index) => {
                                        if (index === 0) {
                                            label.fillStyle = '#7FECD3'; // 유동인구
                                        } else if (index === 1) {
                                            label.fillStyle = '#00CF75'; // 노출인구
                                        }
                                    });
                                    return labels;
                                }
                            }
                        },
                        tooltip: {
                            enabled: true,
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            titleColor: '#ffffff',
                            bodyColor: '#ffffff',
                            borderColor: '#ffffff',
                            borderWidth: 1,
                            padding: 12,
                            titleFont: {
                                family: 'Pretendard',
                                size: 12,
                                weight: 600
                            },
                            bodyFont: {
                                family: 'Pretendard',
                                size: 12,
                                weight: 400
                            }
                        },
                        datalabels: {
                            display: true,
                            color: '#616161',
                            font: {
                                family: 'Pretendard',
                                size: 12,
                                weight: 600 // 볼드체
                            },
                            anchor: 'end',
                            align: 'top',
                            offset: 4,
                            formatter: function(value) {
                                return value.toLocaleString() + '명';
                            }
                        }
                    },
                    scales: {
                        x: {
                            stacked: false,
                            grid: {
                                display: false
                            },
                            ticks: {
                                color: '#616161',
                                font: {
                                    family: 'Pretendard',
                                    size: 12,
                                    weight: 400
                                },
                                maxRotation: 0,
                                minRotation: 0,
                                padding: 8
                            }
                        },
                        y: {
                            beginAtZero: true,
                            max: yAxisMax, // 동적으로 계산된 최대값
                            ticks: {
                                stepSize: 500,
                                color: '#616161',
                                font: {
                                    family: 'Pretendard',
                                    size: 12,
                                    weight: 400
                                },
                                callback: function(value) {
                                    return value.toLocaleString();
                                },
                                padding: 8
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)',
                                lineWidth: 1,
                                drawBorder: false
                            }
                        }
                    },
                    layout: {
                        padding: {
                            top: 10,
                            bottom: 10,
                            left: 10,
                            right: 10
                        }
                    },
                    categoryPercentage: 0.6, // 카테고리 간격
                    barPercentage: 0.8 // 그룹 내 막대 간격
                },
                plugins: [{
                    id: 'datalabels',
                    afterDraw: function(chart) {
                        // Chart.js datalabels plugin이 없을 경우를 대비한 수동 라벨 표시
                        const ctx = chart.ctx;
                        chart.data.datasets.forEach((dataset, i) => {
                            const meta = chart.getDatasetMeta(i);
                            meta.data.forEach((bar, index) => {
                                const value = dataset.data[index];
                                const x = bar.x;
                                const y = bar.y - 5;
                                
                                ctx.save();
                                ctx.fillStyle = '#616161';
                                ctx.font = '600 12px Pretendard'; // 볼드체
                                ctx.textAlign = 'center';
                                ctx.textBaseline = 'bottom';
                                ctx.fillText(value.toLocaleString() + '명', x, y - 4);
                                ctx.restore();
                            });
                        });
                    }
                }]
            });
        }

        // 소수점 값 올림 처리 함수
        function roundUpAllDecimals() {
            // 모든 텍스트 노드를 순회하면서 % 기호 앞의 소수점 값들을 올림 처리
            const walker = document.createTreeWalker(
                document.body,
                NodeFilter.SHOW_TEXT,
                null,
                false
            );

            let node;
            const textNodes = [];
            while (node = walker.nextNode()) {
                // 템플릿 변수나 이미 처리된 노드는 제외
                if (node.textContent && !node.textContent.includes('{{') && !node.textContent.includes('{%')) {
                    textNodes.push(node);
                }
            }

            textNodes.forEach(textNode => {
                let text = textNode.textContent;
                
                // 소수점이 포함된 숫자 패턴 찾기 (예: 58.2%, 45.1% 등)
                // 정규식: 소수점이 있는 숫자 뒤에 %가 오는 경우
                text = text.replace(/(\d+\.\d+)%/g, (match, num) => {
                    const rounded = Math.ceil(parseFloat(num));
                    return rounded + '%';
                });
                
                // 괄호 안의 소수점 값 (예: (45.1%), (30.1%) 등)
                text = text.replace(/\((\d+\.\d+)%\)/g, (match, num) => {
                    const rounded = Math.ceil(parseFloat(num));
                    return '(' + rounded + '%)';
                });
                
                // 소수점만 있는 숫자 (괄호나 % 없이)
                text = text.replace(/(\d+\.\d+)/g, (match, num) => {
                    // 이미 처리된 경우 제외 (다음에 %나 )가 오는 경우)
                    if (match.includes('%') || match.includes(')')) {
                        return match;
                    }
                    const rounded = Math.ceil(parseFloat(num));
                    return rounded.toString();
                });

                if (text !== textNode.textContent) {
                    textNode.textContent = text;
                }
            });
        }

        // 페이지 로드 후 실행
        document.addEventListener('DOMContentLoaded', function() {
            roundUpAllDecimals();
            // 미디어그룹 목록 생성
            목차미디어그룹목록생성();
            divider미디어그룹목록생성();
        });

        // 동적 콘텐츠가 추가된 후에도 실행할 수 있도록 MutationObserver 추가
        const observer = new MutationObserver(function(mutations) {
            roundUpAllDecimals();
        });

        observer.observe(document.body, {
            childList: true,
            subtree: true,
            characterData: true
        });

        // 인구 피라미드 차트 (주요 광고 성과 4) - 여러 미디어그룹 비교
        const pyramidContainer = document.getElementById('pyramid-comparison-container');
        if (pyramidContainer) {
            // 서버 측에서 템플릿 변수를 실제 데이터로 치환해야 합니다
            // 예시 구조:
            // const 미디어그룹별연령대데이터 = [
            //     {
            //         미디어그룹명: '강남역 2호선 지하철 광고',
            //         연령대별데이터: [
            //             { 연령대: '10-14세', 남성: 120, 여성: 110 },
            //             { 연령대: '15-19세', 남성: 150, 여성: 140 },
            //             { 연령대: '20-24세', 남성: 200, 여성: 180 },
            //             { 연령대: '25-29세', 남성: 180, 여성: 190 },
            //             { 연령대: '30대', 남성: 4200, 여성: 4600 },
            //             { 연령대: '40대', 남성: 150, 여성: 160 },
            //             { 연령대: '50대', 남성: 100, 여성: 120 },
            //             { 연령대: '60대', 남성: 80, 여성: 90 },
            //             { 연령대: '70대 이상', 남성: 50, 여성: 60 }
            //         ]
            //     },
            //     {
            //         미디어그룹명: '홍대입구역 빌딩',
            //         연령대별데이터: [...]
            //     },
            //     {
            //         미디어그룹명: '시청역 빌딩',
            //         연령대별데이터: [...]
            //     }
            // ];
            
            // 임시 데이터 (서버에서 위의 템플릿으로 치환)
            const 미디어그룹별연령대데이터 = [
                {
                    미디어그룹명: '강남역 2호선 지하철 광고',
                    연령대별데이터: [
                        { 연령대: '10-14세', 남성: 120, 여성: 110 },
                        { 연령대: '15-19세', 남성: 150, 여성: 140 },
                        { 연령대: '20-24세', 남성: 200, 여성: 180 },
                        { 연령대: '25-29세', 남성: 180, 여성: 190 },
                        { 연령대: '30대', 남성: 4200, 여성: 4600 },
                        { 연령대: '40대', 남성: 150, 여성: 160 },
                        { 연령대: '50대', 남성: 100, 여성: 120 },
                        { 연령대: '60대', 남성: 80, 여성: 90 },
                        { 연령대: '70대 이상', 남성: 50, 여성: 60 }
                    ]
                },
                {
                    미디어그룹명: '홍대입구역 빌딩',
                    연령대별데이터: [
                        { 연령대: '10-14세', 남성: 100, 여성: 90 },
                        { 연령대: '15-19세', 남성: 130, 여성: 120 },
                        { 연령대: '20-24세', 남성: 180, 여성: 170 },
                        { 연령대: '25-29세', 남성: 4000, 여성: 4200 },
                        { 연령대: '30대', 남성: 180, 여성: 190 },
                        { 연령대: '40대', 남성: 140, 여성: 150 },
                        { 연령대: '50대', 남성: 90, 여성: 110 },
                        { 연령대: '60대', 남성: 70, 여성: 80 },
                        { 연령대: '70대 이상', 남성: 40, 여성: 50 }
                    ]
                },
                {
                    미디어그룹명: '시청역 빌딩',
                    연령대별데이터: [
                        { 연령대: '10-14세', 남성: 110, 여성: 100 },
                        { 연령대: '15-19세', 남성: 140, 여성: 130 },
                        { 연령대: '20-24세', 남성: 190, 여성: 180 },
                        { 연령대: '25-29세', 남성: 200, 여성: 210 },
                        { 연령대: '30대', 남성: 4300, 여성: 5200 },
                        { 연령대: '40대', 남성: 160, 여성: 170 },
                        { 연령대: '50대', 남성: 110, 여성: 130 },
                        { 연령대: '60대', 남성: 90, 여성: 100 },
                        { 연령대: '70대 이상', 남성: 60, 여성: 70 }
                    ]
                }
            ];

            // 모든 미디어그룹의 최대값 계산
            const maxValue = Math.max(
                ...미디어그룹별연령대데이터.flatMap(그룹 =>
                    그룹.연령대별데이터.map(item => Math.max(item.남성, item.여성))
                )
            );

            // 연령대 라벨 (모든 그룹이 동일한 연령대 사용)
            const 연령대라벨 = ['10-14세', '15-19세', '20-24세', '25-29세', '30대', '40대', '50대', '60대', '70대 이상'];

            // 각 미디어그룹별로 차트 생성
            미디어그룹별연령대데이터.forEach((그룹, index) => {
                // 차트 컨테이너 생성
                const chartWrapper = document.createElement('div');
                chartWrapper.className = 'pyramid-chart-wrapper';
                
                const chartDiv = document.createElement('div');
                chartDiv.className = 'pyramid-chart-container';
                const canvas = document.createElement('canvas');
                canvas.id = `chart-canvas-pyramid-${index}`;
                chartDiv.appendChild(canvas);
                chartWrapper.appendChild(chartDiv);
                
                // 차트 제목을 하단에 추가
                const chartTitle = document.createElement('div');
                chartTitle.className = 'pyramid-chart-title';
                chartTitle.textContent = 그룹.미디어그룹명;
                chartWrapper.appendChild(chartTitle);
                
                pyramidContainer.appendChild(chartWrapper);

                // 차트 데이터 준비
                const 남성데이터 = 연령대라벨.map(연령대 => {
                    const item = 그룹.연령대별데이터.find(d => d.연령대 === 연령대);
                    return item ? -item.남성 : 0; // 음수로 왼쪽에 표시
                });
                
                const 여성데이터 = 연령대라벨.map(연령대 => {
                    const item = 그룹.연령대별데이터.find(d => d.연령대 === 연령대);
                    return item ? item.여성 : 0; // 양수로 오른쪽에 표시
                });

                // 차트 생성
                // Y축은 첫 번째 차트(index === 0)에만 표시
                const showYAxis = index === 0;
                
                const pyramidChart = new Chart(canvas, {
                    type: 'bar',
                    data: {
                        labels: 연령대라벨,
                        datasets: [
                            {
                                label: '남성',
                                data: 남성데이터,
                                backgroundColor: '#4DADFF',
                                borderColor: '#4DADFF',
                                borderWidth: 0
                            },
                            {
                                label: '여성',
                                data: 여성데이터,
                                backgroundColor: '#FFA462',
                                borderColor: '#FFA462',
                                borderWidth: 0
                            }
                        ]
                    },
                    options: {
                        indexAxis: 'y',
                        layout: {
                            padding: {
                                left: showYAxis ? 0 : -50 // 첫 번째 차트가 아닌 경우 왼쪽 패딩 제거
                            }
                        },
                        scales: {
                            x: {
                                stacked: false,
                                beginAtZero: true,
                                max: maxValue,
                                min: -maxValue,
                                ticks: {
                                    callback: function(value) {
                                        return Math.abs(value);
                                    },
                                    font: {
                                        family: 'Pretendard',
                                        size: 10
                                    },
                                    color: '#757575'
                                },
                                grid: {
                                    display: true,
                                    color: '#e0e0e0'
                                }
                            },
                            y: {
                                stacked: false,
                                ticks: {
                                    display: showYAxis, // 첫 번째 차트에만 Y축 라벨 표시
                                    font: {
                                        family: 'Pretendard',
                                        size: 10
                                    },
                                    color: '#616161'
                                },
                                grid: {
                                    display: false
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false // 범례는 HTML로 별도 표시
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        const label = context.dataset.label || '';
                                        const value = Math.abs(context.parsed.x);
                                        return label + ': ' + value + '명';
                                    }
                                },
                                titleFont: {
                                    family: 'Pretendard',
                                    size: 12
                                },
                                bodyFont: {
                                    family: 'Pretendard',
                                    size: 11
                                }
                            }
                        },
                        maintainAspectRatio: false,
                        responsive: true
                    }
                });
            });
        }

        // 미디어그룹별 컬러 팔레트 (순서대로 적용, 밝게 조정)
        const 미디어그룹컬러팔레트 = [
            '#0389A1', // MG 1 (밝게 조정)
            '#00C5D9', // MG 2 (밝게 조정)
            '#0044C4', // MG 3 (밝게 조정)
            '#FF5252', // MG 4 (밝게 조정)
            '#B3D5EB', // MG 5 (밝게 조정)
            '#C6044B', // MG 6 (밝게 조정)
            '#0A56FF', // MG 7 (밝게 조정)
            '#0A7FFF', // MG 8 (밝게 조정)
            '#00CCFF', // MG 9 (밝게 조정)
            '#E02F05', // MG 10 (밝게 조정)
            '#FFE066', // MG 11 (밝게 조정)
            '#E1FF70', // MG 12 (밝게 조정)
            '#A8629F', // MG 13 (밝게 조정)
            '#2AA3D1', // MG 14 (밝게 조정)
            '#8DD4C6', // MG 15 (밝게 조정)
            '#F255B3', // MG 16 (밝게 조정)
            '#D1427F', // MG 17 (밝게 조정)
            '#2A6FB0', // MG 18 (밝게 조정)
            '#7A2FC4', // MG 19 (밝게 조정)
            '#33E5FF'  // MG 20 (밝게 조정)
        ];

        // 일별 노출인구 비교 차트 (주요 광고 성과 4-2)
        const dailyCtx = document.getElementById('chart-canvas-daily');
        const dailyMaxValueEl = document.getElementById('daily-chart-max-value');
        const dailyLegendEl = document.querySelector('.frame-1686563137-daily');
        
        if (dailyCtx) {
            // 서버 측에서 템플릿 변수를 실제 데이터로 치환해야 합니다
            // 미디어그룹별 색상은 미디어그룹컬러팔레트 배열에서 순서대로 가져옵니다
            // 예시 구조:
            // const 미디어그룹컬러팔레트 = ['#026E81', '#00ABBD', '#00349B', ...]; // 위에 정의됨
            // const 일별노출인구데이터 = {
            //     날짜리스트: ['2025.07.01', '2025.07.02', '2025.07.03', ...],
            //     미디어그룹리스트: [
            //         {
            //             미디어그룹명: '강남역 2호선 지하철 광고',
            //             일별데이터: [1200, 1500, 1800, ...],
            //             색상: 미디어그룹컬러팔레트[0] // 첫 번째 미디어그룹은 MG 1 색상
            //         },
            //         {
            //             미디어그룹명: '홍대입구역 빌딩',
            //             일별데이터: [800, 1000, 2800, ...],
            //             색상: 미디어그룹컬러팔레트[1] // 두 번째 미디어그룹은 MG 2 색상
            //         },
            //         {
            //             미디어그룹명: '시청역 빌딩',
            //             일별데이터: [1000, 1200, 3200, ...],
            //             색상: 미디어그룹컬러팔레트[2] // 세 번째 미디어그룹은 MG 3 색상
            //         }
            //         // 색상을 지정하지 않으면 자동으로 팔레트에서 순서대로 할당됩니다
            //     ],
            //     일평균: 2500
            // };
            // 
            // 서버 측 렌더링 예시 (Handlebars):
            // const 미디어그룹컬러팔레트 = ['#026E81', '#00ABBD', '#00349B', ...];
            // {{#each 미디어그룹리스트}}
            //   {
            //     미디어그룹명: '{{this.이름}}',
            //     일별데이터: [{{#each this.일별데이터}}{{this}}{{#unless @last}},{{/unless}}{{/each}}],
            //     색상: 미디어그룹컬러팔레트[{{@index}}] // 순서대로 색상 할당
            //   }{{#unless @last}},{{/unless}}
            // {{/each}}
            //
            // 서버 측 렌더링 예시 (Jinja2):
            // const 미디어그룹컬러팔레트 = ['#026E81', '#00ABBD', '#00349B', ...];
            // {% for item in 미디어그룹리스트 %}
            //   {
            //     미디어그룹명: '{{item.이름}}',
            //     일별데이터: [{{item.일별데이터|join(',')}}],
            //     색상: 미디어그룹컬러팔레트[{{loop.index0}}] // 순서대로 색상 할당
            //   }{% if not loop.last %},{% endif %}
            // {% endfor %}
            
            // 임시 데이터 (서버에서 위의 템플릿으로 치환)
            const 일별노출인구데이터 = {
                날짜리스트: ['07.01', '07.02', '07.03', '07.04', '07.05', '07.06', '07.07', '07.08', '07.09', '07.10', 
                             '07.11', '07.12', '07.13', '07.14', '07.15', '07.16', '07.17', '07.18', '07.19', '07.20',
                             '07.21', '07.22', '07.23', '07.24', '07.25', '07.26', '07.27', '07.28', '07.29', '07.30', '07.31'],
                미디어그룹리스트: [
                    {
                        미디어그룹명: '강남역 2호선 지하철 광고',
                        일별데이터: [1200, 1500, 1800, 1600, 1400, 1700, 1900, 2100, 2000, 1800,
                                     1600, 1500, 1700, 1900, 2100, 2000, 1800, 1600, 1500, 1700,
                                     1900, 2100, 2000, 1800, 1600, 1500, 1700, 1900, 2100, 2000, 1800],
                        색상: 미디어그룹컬러팔레트[0] // MG 1
                    },
                    {
                        미디어그룹명: '홍대입구역 빌딩',
                        일별데이터: [800, 1000, 2800, 1200, 1100, 1300, 1500, 1400, 1200, 1100,
                                     1000, 1200, 1400, 1500, 1300, 1200, 1100, 1000, 1200, 1400,
                                     1500, 1300, 1200, 1100, 1000, 1200, 1400, 1500, 1300, 1200, 1100],
                        색상: 미디어그룹컬러팔레트[1] // MG 2
                    },
                    {
                        미디어그룹명: '시청역 빌딩',
                        일별데이터: [1000, 1200, 3200, 1400, 1300, 1500, 1700, 1600, 1400, 1300,
                                     1200, 1400, 1600, 1700, 1500, 1400, 1300, 1200, 1400, 1600,
                                     1700, 1500, 1400, 1300, 1200, 1400, 1600, 1700, 1500, 1400, 1300],
                        색상: 미디어그룹컬러팔레트[2] // MG 3
                    }
                ],
                일평균: 2500
            };

            // 각 날짜별 총합 계산
            const 날짜별총합 = 일별노출인구데이터.날짜리스트.map((날짜, 인덱스) => {
                return 일별노출인구데이터.미디어그룹리스트.reduce((합, 그룹) => 합 + 그룹.일별데이터[인덱스], 0);
            });

            // 총합이 가장 많은 날 찾기
            const 최대값인덱스 = 날짜별총합.indexOf(Math.max(...날짜별총합));
            const 최대총합값 = 날짜별총합[최대값인덱스];

            // 최대값 표시
            if (dailyMaxValueEl) {
                dailyMaxValueEl.textContent = `총 ${최대총합값.toLocaleString()} 명`;
            }

            // 각 미디어그룹별 최대값 찾기
            const 미디어그룹별최대값 = 일별노출인구데이터.미디어그룹리스트.map(그룹 => {
                const 최대값 = Math.max(...그룹.일별데이터);
                const 최대값인덱스 = 그룹.일별데이터.indexOf(최대값);
                return { 그룹, 최대값, 최대값인덱스 };
            });

            // 범례 생성 (미디어그룹별 색상 순서대로 적용)
            if (dailyLegendEl) {
                일별노출인구데이터.미디어그룹리스트.forEach((그룹, index) => {
                    // 색상이 지정되지 않은 경우 팔레트에서 순서대로 가져오기
                    const 색상 = 그룹.색상 || 미디어그룹컬러팔레트[index % 미디어그룹컬러팔레트.length];
                    
                    const legendItem = document.createElement('div');
                    legendItem.className = 'legend-item';
                    
                    const legendIcon = document.createElement('div');
                    legendIcon.className = 'legend-icon';
                    legendIcon.style.backgroundColor = 색상;
                    legendItem.appendChild(legendIcon);
                    
                    const legendText = document.createElement('span');
                    legendText.className = 'legend-text';
                    legendText.textContent = 그룹.미디어그룹명;
                    legendItem.appendChild(legendText);
                    
                    dailyLegendEl.appendChild(legendItem);
                });

                // 평균 범례 추가
                const legendSeparator = document.createElement('div');
                legendSeparator.className = 'legend-separator';
                legendSeparator.innerHTML = '<svg width="20" height="1" viewBox="0 0 20 1"><line x1="0" y1="0.5" x2="20" y2="0.5" stroke="#626262" stroke-width="1"/></svg>';
                dailyLegendEl.appendChild(legendSeparator);

                const legendItemAvg = document.createElement('div');
                legendItemAvg.className = 'legend-item';
                const legendTextAvg = document.createElement('span');
                legendTextAvg.className = 'legend-text';
                legendTextAvg.textContent = '평균';
                legendItemAvg.appendChild(legendTextAvg);
                dailyLegendEl.appendChild(legendItemAvg);
            }

            // 차트 데이터셋 생성 (미디어그룹별 색상 순서대로 적용)
            const datasets = 일별노출인구데이터.미디어그룹리스트.map((그룹, index) => {
                const 최대값정보 = 미디어그룹별최대값[index];
                // 색상이 지정되지 않은 경우 팔레트에서 순서대로 가져오기
                const 색상 = 그룹.색상 || 미디어그룹컬러팔레트[index % 미디어그룹컬러팔레트.length];
                return {
                    label: 그룹.미디어그룹명,
                    data: 그룹.일별데이터,
                    backgroundColor: 색상,
                    borderColor: 색상,
                    borderWidth: 0,
                    maxValue: 최대값정보.최대값,
                    maxValueIndex: 최대값정보.최대값인덱스
                };
            });

            // 평균선 데이터셋 추가
            datasets.push({
                label: '평균',
                data: Array(일별노출인구데이터.날짜리스트.length).fill(일별노출인구데이터.일평균),
                type: 'line',
                borderColor: '#626262',
                borderWidth: 1,
                borderDash: [5, 5],
                fill: false,
                pointRadius: 0,
                pointHoverRadius: 0,
                tension: 0
            });

            const dailyChart = new Chart(dailyCtx, {
                type: 'bar',
                data: {
                    labels: 일별노출인구데이터.날짜리스트,
                    datasets: datasets
                },
                options: {
                    indexAxis: 'x',
                    scales: {
                        x: {
                            stacked: true,
                            ticks: {
                                font: {
                                    family: 'Pretendard',
                                    size: 10
                                },
                                color: '#616161',
                                maxRotation: 45,
                                minRotation: 45
                            },
                            grid: {
                                display: false
                            }
                        },
                        y: {
                            stacked: true,
                            beginAtZero: true,
                            ticks: {
                                font: {
                                    family: 'Pretendard',
                                    size: 10
                                },
                                color: '#757575',
                                callback: function(value) {
                                    return value.toLocaleString();
                                }
                            },
                            grid: {
                                display: true,
                                color: '#e0e0e0'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false // 범례는 HTML로 별도 표시
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.dataset.label || '';
                                    const value = context.parsed.y;
                                    return label + ': ' + value.toLocaleString() + '명';
                                }
                            },
                            titleFont: {
                                family: 'Pretendard',
                                size: 12
                            },
                            bodyFont: {
                                family: 'Pretendard',
                                size: 11
                            }
                        }
                    },
                    maintainAspectRatio: false,
                    responsive: true,
                    animation: {
                        onComplete: function() {
                            // 각 미디어그룹별 최대값을 막대 위에 표시
                            const ctx = dailyChart.ctx;
                            미디어그룹별최대값.forEach((정보, index) => {
                                const meta = dailyChart.getDatasetMeta(index);
                                
                                meta.data.forEach((bar, barIndex) => {
                                    if (barIndex === 정보.최대값인덱스) {
                                        const x = bar.x;
                                        // 누적된 높이 계산
                                        let 누적높이 = 0;
                                        for (let i = 0; i < index; i++) {
                                            const prevMeta = dailyChart.getDatasetMeta(i);
                                            누적높이 += prevMeta.data[barIndex].height;
                                        }
                                        const y = bar.y - 누적높이 - bar.height / 2;
                                        
                                        ctx.save();
                                        ctx.fillStyle = '#000000';
                                        ctx.font = '700 11px Pretendard';
                                        ctx.textAlign = 'center';
                                        ctx.textBaseline = 'middle';
                                        ctx.fillText(정보.최대값.toLocaleString() + '명', x, y);
                                        ctx.restore();
                                    }
                                });
                            });
                        }
                    }
                }
            });
        }

        // 요일별 노출인구 비교 차트 (주요 광고 성과 4-3)
        const weeklyCtx = document.getElementById('chart-canvas-weekly');
        const weeklyMaxValueEl = document.getElementById('weekly-chart-max-value');
        const weeklyLegendEl = document.querySelector('.frame-1686563137-weekly');
        
        if (weeklyCtx) {
            // 서버 측에서 템플릿 변수를 실제 데이터로 치환해야 합니다
            // 예시 구조:
            // const 요일별노출인구데이터 = {
            //     요일리스트: ['월', '화', '수', '목', '금', '토', '일'],
            //     미디어그룹리스트: [
            //         {
            //             미디어그룹명: '강남역 2호선 지하철 광고',
            //             요일별데이터: [8500, 9000, 9200, 8800, 9100, 7200, 6500], // 월~일
            //             색상: 미디어그룹컬러팔레트[0] // 순서대로 적용
            //         },
            //         {
            //             미디어그룹명: '홍대입구역 빌딩',
            //             요일별데이터: [6000, 6500, 6800, 6400, 6700, 5500, 4800],
            //             색상: 미디어그룹컬러팔레트[1]
            //         },
            //         {
            //             미디어그룹명: '시청역 빌딩',
            //             요일별데이터: [7500, 7800, 8000, 7700, 7900, 6200, 5500],
            //             색상: 미디어그룹컬러팔레트[2]
            //         }
            //     ],
            //     일평균: 8800 // 전체 미디어그룹의 요일별 일 평균 노출인구
            // };
            
            // 임시 데이터 (서버에서 위의 템플릿으로 치환)
            const 요일별노출인구데이터 = {
                요일리스트: ['월', '화', '수', '목', '금', '토', '일'],
                미디어그룹리스트: [
                    {
                        미디어그룹명: '강남역 2호선 지하철 광고',
                        요일별데이터: [8500, 9000, 9200, 8800, 9100, 7200, 6500],
                        색상: 미디어그룹컬러팔레트[0] // MG 1
                    },
                    {
                        미디어그룹명: '홍대입구역 빌딩',
                        요일별데이터: [6000, 6500, 6800, 6400, 6700, 5500, 4800],
                        색상: 미디어그룹컬러팔레트[1] // MG 2
                    },
                    {
                        미디어그룹명: '시청역 빌딩',
                        요일별데이터: [7500, 7800, 8000, 7700, 7900, 6200, 5500],
                        색상: 미디어그룹컬러팔레트[2] // MG 3
                    }
                ],
                일평균: 8800
            };

            // 각 요일별 총합 계산
            const 요일별총합 = 요일별노출인구데이터.요일리스트.map((요일, 인덱스) => {
                return 요일별노출인구데이터.미디어그룹리스트.reduce((합, 그룹) => 합 + 그룹.요일별데이터[인덱스], 0);
            });

            // 총합이 가장 많은 요일 찾기
            const 최대값인덱스 = 요일별총합.indexOf(Math.max(...요일별총합));
            const 최대총합값 = 요일별총합[최대값인덱스];
            const 최대요일 = 요일별노출인구데이터.요일리스트[최대값인덱스];

            // 최대값 표시
            if (weeklyMaxValueEl) {
                weeklyMaxValueEl.textContent = `평균 ${최대총합값.toLocaleString()} 명`;
            }

            // 각 미디어그룹별 최대값 찾기
            const 미디어그룹별최대값 = 요일별노출인구데이터.미디어그룹리스트.map(그룹 => {
                const 최대값 = Math.max(...그룹.요일별데이터);
                const 최대값인덱스 = 그룹.요일별데이터.indexOf(최대값);
                return { 그룹, 최대값, 최대값인덱스 };
            });

            // 범례 생성
            if (weeklyLegendEl) {
                요일별노출인구데이터.미디어그룹리스트.forEach((그룹, index) => {
                    // 색상이 지정되지 않은 경우 팔레트에서 순서대로 가져오기
                    const 색상 = 그룹.색상 || 미디어그룹컬러팔레트[index % 미디어그룹컬러팔레트.length];
                    
                    const legendItem = document.createElement('div');
                    legendItem.className = 'legend-item';
                    
                    const legendIcon = document.createElement('div');
                    legendIcon.className = 'legend-icon';
                    legendIcon.style.backgroundColor = 색상;
                    legendItem.appendChild(legendIcon);
                    
                    const legendText = document.createElement('span');
                    legendText.className = 'legend-text';
                    legendText.textContent = 그룹.미디어그룹명;
                    legendItem.appendChild(legendText);
                    
                    weeklyLegendEl.appendChild(legendItem);
                });

                // 일평균 범례 추가
                const legendSeparator = document.createElement('div');
                legendSeparator.className = 'legend-separator';
                legendSeparator.innerHTML = '<svg width="20" height="1" viewBox="0 0 20 1"><line x1="0" y1="0.5" x2="20" y2="0.5" stroke="#626262" stroke-width="1"/></svg>';
                weeklyLegendEl.appendChild(legendSeparator);

                const legendItemAvg = document.createElement('div');
                legendItemAvg.className = 'legend-item';
                const legendTextAvg = document.createElement('span');
                legendTextAvg.className = 'legend-text';
                legendTextAvg.textContent = '일평균 노출인구수';
                legendItemAvg.appendChild(legendTextAvg);
                weeklyLegendEl.appendChild(legendItemAvg);
            }

            // 차트 데이터셋 생성 (누적 막대그래프)
            const datasets = 요일별노출인구데이터.미디어그룹리스트.map((그룹, index) => {
                const 최대값정보 = 미디어그룹별최대값[index];
                // 색상이 지정되지 않은 경우 팔레트에서 순서대로 가져오기
                const 색상 = 그룹.색상 || 미디어그룹컬러팔레트[index % 미디어그룹컬러팔레트.length];
                return {
                    label: 그룹.미디어그룹명,
                    data: 그룹.요일별데이터,
                    backgroundColor: 색상,
                    borderColor: 색상,
                    borderWidth: 0,
                    maxValue: 최대값정보.최대값,
                    maxValueIndex: 최대값정보.최대값인덱스
                };
            });

            // 일평균선 데이터셋 추가 (꺾은선) - 막대 뒤에 그리기 위해 먼저 추가
            datasets.unshift({
                label: '일평균 노출인구수',
                data: Array(요일별노출인구데이터.요일리스트.length).fill(요일별노출인구데이터.일평균),
                type: 'line',
                borderColor: '#008aff',
                borderWidth: 2,
                borderDash: [],
                fill: false,
                pointRadius: 0,
                pointHoverRadius: 0,
                tension: 0,
                order: 1 // 선을 막대 뒤에 그리기
            });

            const weeklyChart = new Chart(weeklyCtx, {
                type: 'bar',
                data: {
                    labels: 요일별노출인구데이터.요일리스트,
                    datasets: datasets
                },
                options: {
                    indexAxis: 'x',
                    scales: {
                        x: {
                            stacked: true,
                            ticks: {
                                font: {
                                    family: 'Pretendard',
                                    size: 12
                                },
                                color: '#616161',
                                maxRotation: 0,
                                minRotation: 0
                            },
                            grid: {
                                display: false
                            }
                        },
                        y: {
                            stacked: true,
                            beginAtZero: true,
                            ticks: {
                                font: {
                                    family: 'Pretendard',
                                    size: 10
                                },
                                color: '#757575',
                                callback: function(value) {
                                    return value.toLocaleString();
                                }
                            },
                            grid: {
                                display: true,
                                color: '#e0e0e0'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false // 범례는 HTML로 별도 표시
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.dataset.label || '';
                                    const value = context.parsed.y;
                                    return label + ': ' + value.toLocaleString() + '명';
                                }
                            },
                            titleFont: {
                                family: 'Pretendard',
                                size: 12
                            },
                            bodyFont: {
                                family: 'Pretendard',
                                size: 11
                            }
                        }
                    },
                    maintainAspectRatio: false,
                    responsive: true,
                    animation: {
                        onComplete: function() {
                            // 각 미디어그룹별 최대값을 막대 위에 표시
                            const ctx = weeklyChart.ctx;
                            미디어그룹별최대값.forEach((정보, index) => {
                                const meta = weeklyChart.getDatasetMeta(index);
                                
                                meta.data.forEach((bar, barIndex) => {
                                    if (barIndex === 정보.최대값인덱스) {
                                        const x = bar.x;
                                        // 누적된 높이 계산
                                        let 누적높이 = 0;
                                        for (let i = 0; i < index; i++) {
                                            const prevMeta = weeklyChart.getDatasetMeta(i);
                                            누적높이 += prevMeta.data[barIndex].height;
                                        }
                                        const y = bar.y - 누적높이 - bar.height / 2;
                                        
                                        ctx.save();
                                        ctx.fillStyle = '#FFFFFF';
                                        ctx.font = '700 11px Pretendard';
                                        ctx.textAlign = 'center';
                                        ctx.textBaseline = 'middle';
                                        ctx.fillText(정보.최대값.toLocaleString() + '명', x, y);
                                        ctx.restore();
                                    }
                                });
                            });
                        }
                    }
                }
            });
        }

        // 시간대별 노출인구 비교 차트 (주요 광고 성과 4-4)
        const hourlyCtx = document.getElementById('chart-canvas-hourly');
        const hourlyMaxValueEl = document.getElementById('hourly-chart-max-value');
        const hourlyLegendEl = document.querySelector('.frame-1686563137-hourly');
        
        if (hourlyCtx) {
            // 서버 측에서 템플릿 변수를 실제 데이터로 치환해야 합니다
            // 예시 구조:
            // const 시간대별노출인구데이터 = {
            //     시간대리스트: ['09시', '10시', '11시', '12시', '13시', '14시', '15시', '16시', '17시', '18시', '19시', '20시', '21시', '22시'],
            //     미디어그룹리스트: [
            //         {
            //             미디어그룹명: '강남역 2호선 지하철 광고',
            //             시간대별데이터: [2400, 2800, 3200, 3800, 3500, 3300, 3400, 3600, 4000, 4200, 3800, 3200, 2800, 2400],
            //             색상: 미디어그룹컬러팔레트[0] // 순서대로 적용
            //         },
            //         {
            //             미디어그룹명: '홍대입구역 빌딩',
            //             시간대별데이터: [1800, 2100, 2400, 2800, 2600, 2500, 2600, 2700, 3000, 3200, 2900, 2400, 2100, 1800],
            //             색상: 미디어그룹컬러팔레트[1]
            //         },
            //         {
            //             미디어그룹명: '시청역 빌딩',
            //             시간대별데이터: [2000, 2300, 2700, 3200, 3000, 2900, 3000, 3100, 3400, 3600, 3300, 2800, 2400, 2000],
            //             색상: 미디어그룹컬러팔레트[2]
            //         }
            //     ],
            //     시간대평균: 8800 // 전체 미디어그룹의 시간대별 평균 노출인구
            // };
            
            // 임시 데이터 (서버에서 위의 템플릿으로 치환)
            const 시간대별노출인구데이터 = {
                시간대리스트: ['09시', '10시', '11시', '12시', '13시', '14시', '15시', '16시', '17시', '18시', '19시', '20시', '21시', '22시'],
                미디어그룹리스트: [
                    {
                        미디어그룹명: '강남역 2호선 지하철 광고',
                        시간대별데이터: [2400, 2800, 3200, 3800, 3500, 3300, 3400, 3600, 4000, 4200, 3800, 3200, 2800, 2400],
                        색상: 미디어그룹컬러팔레트[0] // MG 1
                    },
                    {
                        미디어그룹명: '홍대입구역 빌딩',
                        시간대별데이터: [1800, 2100, 2400, 2800, 2600, 2500, 2600, 2700, 3000, 3200, 2900, 2400, 2100, 1800],
                        색상: 미디어그룹컬러팔레트[1] // MG 2
                    },
                    {
                        미디어그룹명: '시청역 빌딩',
                        시간대별데이터: [2000, 2300, 2700, 3200, 3000, 2900, 3000, 3100, 3400, 3600, 3300, 2800, 2400, 2000],
                        색상: 미디어그룹컬러팔레트[2] // MG 3
                    }
                ],
                시간대평균: 8800
            };

            // 각 시간대별 총합 계산
            const 시간대별총합 = 시간대별노출인구데이터.시간대리스트.map((시간대, 인덱스) => {
                return 시간대별노출인구데이터.미디어그룹리스트.reduce((합, 그룹) => 합 + 그룹.시간대별데이터[인덱스], 0);
            });

            // 총합이 가장 많은 시간대 찾기
            const 최대값인덱스 = 시간대별총합.indexOf(Math.max(...시간대별총합));
            const 최대총합값 = 시간대별총합[최대값인덱스];
            const 최대시간대 = 시간대별노출인구데이터.시간대리스트[최대값인덱스];

            // 최대값 표시
            if (hourlyMaxValueEl) {
                hourlyMaxValueEl.textContent = `평균 ${최대총합값.toLocaleString()} 명`;
            }

            // 각 미디어그룹별 최대값 찾기
            const 미디어그룹별최대값 = 시간대별노출인구데이터.미디어그룹리스트.map(그룹 => {
                const 최대값 = Math.max(...그룹.시간대별데이터);
                const 최대값인덱스 = 그룹.시간대별데이터.indexOf(최대값);
                return { 그룹, 최대값, 최대값인덱스 };
            });

            // 범례 생성
            if (hourlyLegendEl) {
                시간대별노출인구데이터.미디어그룹리스트.forEach((그룹, index) => {
                    // 색상이 지정되지 않은 경우 팔레트에서 순서대로 가져오기
                    const 색상 = 그룹.색상 || 미디어그룹컬러팔레트[index % 미디어그룹컬러팔레트.length];
                    
                    const legendItem = document.createElement('div');
                    legendItem.className = 'legend-item';
                    
                    const legendIcon = document.createElement('div');
                    legendIcon.className = 'legend-icon';
                    legendIcon.style.backgroundColor = 색상;
                    legendItem.appendChild(legendIcon);
                    
                    const legendText = document.createElement('span');
                    legendText.className = 'legend-text';
                    legendText.textContent = 그룹.미디어그룹명;
                    legendItem.appendChild(legendText);
                    
                    hourlyLegendEl.appendChild(legendItem);
                });

                // 시간대 평균 범례 추가
                const legendSeparator = document.createElement('div');
                legendSeparator.className = 'legend-separator';
                legendSeparator.innerHTML = '<svg width="20" height="1" viewBox="0 0 20 1"><line x1="0" y1="0.5" x2="20" y2="0.5" stroke="#626262" stroke-width="1"/></svg>';
                hourlyLegendEl.appendChild(legendSeparator);

                const legendItemAvg = document.createElement('div');
                legendItemAvg.className = 'legend-item';
                const legendTextAvg = document.createElement('span');
                legendTextAvg.className = 'legend-text';
                legendTextAvg.textContent = '시간대 평균 노출인구수';
                legendItemAvg.appendChild(legendTextAvg);
                hourlyLegendEl.appendChild(legendItemAvg);
            }

            // 차트 데이터셋 생성 (누적 꺾은선 그래프)
            // 각 미디어그룹의 데이터를 누적 계산
            const 누적데이터 = [];
            시간대별노출인구데이터.미디어그룹리스트.forEach((그룹, index) => {
                if (index === 0) {
                    // 첫 번째 그룹은 그대로
                    누적데이터.push([...그룹.시간대별데이터]);
                } else {
                    // 이전 그룹들의 누적값에 현재 그룹 데이터 추가
                    const 이전누적 = 누적데이터[index - 1];
                    누적데이터.push(이전누적.map((값, i) => 값 + 그룹.시간대별데이터[i]));
                }
            });
            
            const datasets = 시간대별노출인구데이터.미디어그룹리스트.map((그룹, index) => {
                const 최대값정보 = 미디어그룹별최대값[index];
                // 색상이 지정되지 않은 경우 팔레트에서 순서대로 가져오기
                const 색상 = 그룹.색상 || 미디어그룹컬러팔레트[index % 미디어그룹컬러팔레트.length];
                return {
                    label: 그룹.미디어그룹명,
                    data: 누적데이터[index], // 누적된 데이터 사용
                    backgroundColor: 색상 + '80', // 투명도 추가
                    borderColor: 색상,
                    borderWidth: 2,
                    fill: index === 0 ? true : '-1', // 첫 번째는 0부터, 나머지는 이전 데이터셋 위에
                    tension: 0.4, // 부드러운 곡선
                    maxValue: 최대값정보.최대값,
                    maxValueIndex: 최대값정보.최대값인덱스
                };
            });

            // 시간대 평균선 데이터셋 추가 (보조선)
            datasets.push({
                label: '시간대 평균 노출인구수',
                data: Array(시간대별노출인구데이터.시간대리스트.length).fill(시간대별노출인구데이터.시간대평균),
                type: 'line',
                borderColor: '#008aff',
                borderWidth: 2,
                borderDash: [5, 5],
                fill: false,
                pointRadius: 0,
                pointHoverRadius: 0,
                tension: 0,
                order: 0 // 선을 막대 뒤에 그리기
            });

            const hourlyChart = new Chart(hourlyCtx, {
                type: 'line',
                data: {
                    labels: 시간대별노출인구데이터.시간대리스트,
                    datasets: datasets
                },
                options: {
                    indexAxis: 'x',
                    scales: {
                        x: {
                            stacked: true, // 누적 그래프
                            ticks: {
                                font: {
                                    family: 'Pretendard',
                                    size: 10
                                },
                                color: '#616161',
                                maxRotation: 45,
                                minRotation: 45
                            },
                            grid: {
                                display: false
                            }
                        },
                        y: {
                            stacked: false, // 수동으로 누적 계산했으므로 false
                            beginAtZero: true,
                            ticks: {
                                font: {
                                    family: 'Pretendard',
                                    size: 10
                                },
                                color: '#757575',
                                callback: function(value) {
                                    return value.toLocaleString();
                                }
                            },
                            grid: {
                                display: true,
                                color: '#e0e0e0'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false // 범례는 HTML로 별도 표시
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.dataset.label || '';
                                    const value = context.parsed.y;
                                    return label + ': ' + value.toLocaleString() + '명';
                                }
                            },
                            titleFont: {
                                family: 'Pretendard',
                                size: 12
                            },
                            bodyFont: {
                                family: 'Pretendard',
                                size: 11
                            }
                        }
                    },
                    maintainAspectRatio: false,
                    responsive: true,
                    animation: {
                        onComplete: function() {
                            // 각 미디어그룹별 최대값에 라벨 표시
                            const ctx = hourlyChart.ctx;
                            미디어그룹별최대값.forEach((정보, index) => {
                                const meta = hourlyChart.getDatasetMeta(index);
                                if (meta && meta.data && meta.data[정보.최대값인덱스]) {
                                    const point = meta.data[정보.최대값인덱스];
                                    const x = point.x;
                                    // 누적된 높이 계산
                                    let 누적높이 = 0;
                                    for (let i = 0; i < index; i++) {
                                        const prevMeta = hourlyChart.getDatasetMeta(i);
                                        if (prevMeta && prevMeta.data && prevMeta.data[정보.최대값인덱스]) {
                                            const prevPoint = prevMeta.data[정보.최대값인덱스];
                                            누적높이 += prevPoint.y;
                                        }
                                    }
                                    const y = point.y - 누적높이;
                                    
                                    ctx.save();
                                    ctx.fillStyle = '#000000';
                                    ctx.font = '400 11px Pretendard';
                                    ctx.textAlign = 'center';
                                    ctx.textBaseline = 'bottom';
                                    ctx.fillText(정보.최대값.toLocaleString() + '명', x, y - 5);
                                    ctx.restore();
                                }
                            });
                            
                            // 누적 합계가 가장 높은 시간대 강조 (배경색 추가)
                            const maxTotalMeta = hourlyChart.getDatasetMeta(시간대별노출인구데이터.미디어그룹리스트.length - 1);
                            if (maxTotalMeta && maxTotalMeta.data && maxTotalMeta.data[최대값인덱스]) {
                                const maxPoint = maxTotalMeta.data[최대값인덱스];
                                const x = maxPoint.x;
                                const y = maxPoint.y;
                                
                                // 강조 박스 그리기
                                ctx.save();
                                ctx.fillStyle = 'rgba(182, 167, 255, 0.5)';
                                ctx.strokeStyle = '#6f47ff';
                                ctx.lineWidth = 1;
                                ctx.fillRect(x - 38, 0, 76, y);
                                ctx.strokeRect(x - 38, 0, 76, y);
                                ctx.restore();
                            }
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>

