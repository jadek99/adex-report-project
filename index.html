<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>옥외디지털 광고 효과 분석 보고서</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" as="style" crossorigin>
    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css');
    </style>
    <!-- Chart.js 라이브러리 -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <!-- 페이지 1: 표지 (페이지 번호 없음) -->
    <section class="page page-cover">
        <div class="container">
            <div class="header-frame">
                <div class="title-section">
                    <h1 class="main-title">ADeX 광고 효과 분석 보고서</h1>
                    <h2 class="contract-name">{{광고계약명}}</h2>
                </div>
                <div class="icon-group">
                    <img src="icon-group.png" alt="ADeX 아이콘" class="icon-image">
                </div>
            </div>
            
            <div class="footer-frame">
                <div class="info-section">
                    <div class="period-row">
                        <span class="label">광고기간 : </span>
                        <span class="date-range">
                            <span class="date">{{광고시작일}}</span>
                            <span class="separator">~</span>
                            <span class="date">{{광고종료일}}</span>
                        </span>
                        <span class="total-days">
                            <span class="parenthesis">(총</span>
                            <span class="days-number">{{운영일수}}</span>
                            <span class="days-unit">일)</span>
                        </span>
                    </div>
                    <div class="advertiser-row">
                        <span class="label">광고주명 :</span>
                        <span class="advertiser-name">{{광고주명}}</span>
                    </div>
                </div>
                <div class="issue-date">{{보고서발행일}} 발행</div>
            </div>
        </div>
    </section>

    <!-- 페이지 2: 목차 -->
    <section class="page">
        <div class="container">
            <!-- Frame 8: 상단 헤더 -->
            <div class="frame-8">
                <!-- Frame 1686563114: Breadcrumb -->
                <div class="frame-1686563114">
                    <span class="text-광고계약명">{{광고계약명}}</span>
                    <span class="text-separator">|</span>
                    <span class="text-목차">목차</span>
                </div>
                <!-- 공공 미디어 중개 플랫폼 ADeX -->
                <div class="text-platform">공공 미디어 중개 플랫폼 ADeX</div>
            </div>

            <!-- 내용 영역: 목차 카드 -->
            <div class="frame-내용영역">
                <!-- 목차 영역: 내부 컨테이너 -->
                <div class="frame-목차영역">
                    <!-- 타이틀-목차: 목차 제목 프레임 -->
                    <div class="frame-타이틀목차">
                        <h2 class="text-toc-title">목차</h2>
                    </div>
                    <!-- 목차 리스트: 섹션 컨테이너 -->
                    <div class="frame-목차리스트">
                        <h3 class="text-section-title">1. 미디어그룹 상품 및 주요 광고 성과</h3>
                        <!-- 2. 미디어그룹별 광고 효과 분석: 서브섹션 -->
                        <div class="frame-미디어그룹별광고효과분석">
                            <h4 class="text-subsection-title">2. 미디어그룹별 광고 효과 분석</h4>
                            <ol class="text-subsection-content media-group-list">
                                <!-- 미디어그룹 리스트는 서버에서 반복문으로 동적 생성 -->
                                <!-- 정렬 규칙: 유동 대비 노출 비율순으로 정렬 (내림차순), 동일한 비율일 경우 ㄱㄴㄷ, a-z 순으로 정렬 -->
                                <!-- 
                                    예시 정렬 로직 (JavaScript):
                                    미디어그룹리스트.sort((a, b) => {
                                        // 1순위: 유동 대비 노출 비율 (내림차순)
                                        const ratioA = (a.노출인구 / a.유동인구) * 100;
                                        const ratioB = (b.노출인구 / b.유동인구) * 100;
                                        if (ratioB !== ratioA) {
                                            return ratioB - ratioA; // 내림차순
                                        }
                                        // 2순위: 동일 비율일 경우 이름순 (ㄱㄴㄷ, a-z)
                                        return a.이름.localeCompare(b.이름, 'ko');
                                    });
                                    
                                    예시 정렬 로직 (Python):
                                    sorted(미디어그룹리스트, key=lambda x: (-(x.노출인구 / x.유동인구 * 100), x.이름))
                                -->
                                <!-- Handlebars: {{#each (sortByRatio 미디어그룹리스트)}}<li>{{this.이름}}</li>{{/each}} -->
                                <!-- Jinja2: {% for item in 미디어그룹리스트|sort(attribute='노출비율', reverse=True)|sort(attribute='이름') %}<li>{{item.이름}}</li>{% endfor %} -->
                                <!-- 현재는 임시로 하나의 항목으로 표시 (서버에서 동적 생성 필요) -->
                                <li>{{미디어그룹리스트}}</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 효과 분석 안내: 하단 안내 박스 -->
            <div class="frame-효과분석안내">
                <!-- Frame 24: 헤더 -->
                <div class="frame-24">
                    <img src="icon1.svg" alt="아이콘" class="frame-icon">
                    <span class="text-info-title">효과 분석 안내</span>
                </div>
                <!-- 내용 텍스트 -->
                <p class="text-info-content">효과 분석은 공공데이터, 통신사 데이터, 모바일 OD, 자체 수집 데이터를 기반으로 한 엠앤엠네트웍스의 알고리즘 기반 AI 효과 지표 분석 결과입니다. 본 분석은 옥외광고표준화 얼라이언스 가이드를 준수합니다.</p>
            </div>
            
            <!-- 페이지 번호: container 기준 -->
            <div class="page-number"></div>
        </div>
    </section>

    <!-- 페이지 3: 간지 1 -->
    <section class="page page-divider">
        <div class="container container-divider">
            <div class="divider-content">
                <h1 class="divider-title">1. 미디어그룹 상품 및 주요 광고 성과</h1>
                <div class="divider-logo">
                    <img src="logo-black.png" alt="ADeX 로고" class="logo-image">
                </div>
            </div>
            <!-- 페이지 번호 -->
            <div class="page-number"></div>
        </div>
    </section>

    <!-- 페이지 4: 미디어그룹 상품 정보 -->
    <section class="page page-media-info">
        <div class="container container-media-info">
            <!-- head: 헤더 영역 (Frame 10) -->
            <div class="frame-head">
                <!-- top title: 상단 Breadcrumb -->
                <div class="frame-top-title">
                    <!-- top title: Breadcrumb 그룹 -->
                    <div class="frame-top-title-group">
                        <span class="text-광고계약명-media">{{광고계약명}}</span>
                        <span class="text-separator-media">|</span>
                        <span class="text-목차-media">미디어그룹 상품 및 주요 광고 성과</span>
                    </div>
                    <!-- adex: 공공 미디어 중개 플랫폼 ADeX -->
                    <div class="text-platform-media">공공 미디어 중개 플랫폼 ADeX</div>
                </div>
                <!-- sub title: 타이틀 영역 -->
                <div class="frame-sub-title">
                    <h1 class="text-media-title">미디어그룹 상품 정보</h1>
                    <p class="text-media-subtitle">미디어그룹 상품 및 광고 기간에 대한 정보</p>
                </div>
            </div>

            <!-- Frame 1686563146: 래퍼 프레임 -->
            <div class="frame-1686563146">
                <!-- 내용: 본문 영역 (Frame 내용) -->
                <div class="frame-내용">
                    <!-- content title: 광고 정보 헤더 -->
                    <div class="frame-content-title">
                        <h2 class="text-ad-info-title">광고 정보</h2>
                    </div>

                    <!-- table: 테이블 영역 (Frame table) -->
                    <table class="frame-table">
                        <!-- Frame 18: 첫 번째 행 -->
                        <tr class="frame-18">
                            <td class="field field-label">
                                <span class="field-text">광고주</span>
                            </td>
                            <td class="field field-value" colspan="1">
                                <span class="field-text">{{광고주명}}</span>
                            </td>
                            <td class="field field-label">
                                <span class="field-text">광고 계약명</span>
                            </td>
                            <td class="field field-value" colspan="1">
                                <span class="field-text">{{광고계약명}}</span>
                            </td>
                        </tr>

                        <!-- Frame 14: 두 번째 행 (동적 항목 반복 가능) -->
                        <!-- 서버에서 미디어그룹 상품과 미디어 정보를 반복문으로 생성 -->
                        <!-- 예시: {{#each 미디어그룹리스트}} 또는 {% for item in 미디어그룹리스트 %} -->
                        <tr class="frame-14">
                            <td class="field field-label field-tall">
                                <span class="field-text">미디어그룹 상품</span>
                            </td>
                            <!-- Frame 16: 미디어그룹 상품 값 그룹 -->
                            <td class="field field-value field-tall">
                                <!-- 동적 항목: 서버에서 반복문으로 생성 -->
                                <!-- 예시: {{#each 미디어그룹상품리스트}} -->
                                <!--   <div class="field-value-item">{{this}}</div> -->
                                <!-- {{/each}} -->
                                <div class="field-value-item">{{미디어그룹상품_1}}</div>
                                <div class="field-value-item">{{미디어그룹상품_2}}</div>
                                <div class="field-value-item">{{미디어그룹상품_3}}</div>
                            </td>
                            <td class="field field-label field-tall">
                                <div class="field-label-content">
                                    <span class="field-text">미디어 정보</span>
                                    <span class="field-text-small">(유형 / 사이즈 / *간격/ 대수)</span>
                                </div>
                            </td>
                            <!-- Frame 17: 미디어 정보 값 그룹 -->
                            <td class="field field-value field-tall">
                                <!-- 동적 항목: 서버에서 반복문으로 생성 -->
                                <!-- 미디어 정보 구조: -->
                                <!-- 1. LCD: LCD/ n "/ N대 (n은 사이즈 인치, N은 동일한 사이즈의 LCD 대 수) -->
                                <!--    예시: LCD/ 55 "/ 10대 -->
                                <!-- 2. LED: LED/ 세로 x 가로 mm/ 간격 mm/ N대 (N은 동일한 세로 x 가로, 간격의 LED 대 수) -->
                                <!--    예시: LED/ 1920 x 1080 mm/ 50 mm/ 5대 -->
                                <!-- 3. 기타: 기타/ 세로 x 가로 mm/ N대 (N은 동일한 세로 x 가로의 기타 디스플레이 대 수) -->
                                <!--    예시: 기타/ 800 x 600 mm/ 3대 -->
                                <!-- 
                                    서버 측 렌더링 예시:
                                    {{#each 미디어정보리스트}}
                                      <div class="field-value-item">
                                        {{#if (eq this.유형 "LCD")}}
                                          LCD/ {{this.사이즈}} "/ {{this.대수}}대
                                        {{else if (eq this.유형 "LED")}}
                                          LED/ {{this.세로}} x {{this.가로}} mm/ {{this.간격}} mm/ {{this.대수}}대
                                        {{else}}
                                          기타/ {{this.세로}} x {{this.가로}} mm/ {{this.대수}}대
                                        {{/if}}
                                      </div>
                                    {{/each}}
                                -->
                                <div class="field-value-item">{{미디어정보_1}}</div>
                                <div class="field-value-item">{{미디어정보_2}}</div>
                                <div class="field-value-item">{{미디어정보_3}}</div>
                            </td>
                        </tr>

                        <!-- Frame 19: 세 번째 행 -->
                        <tr class="frame-19">
                            <td class="field field-label">
                                <span class="field-text">광고 기간</span>
                            </td>
                            <td class="field field-value" colspan="1">
                                <span class="field-text">{{광고시작일}} ~ {{광고종료일}} (총 {{운영일수}}일)</span>
                            </td>
                            <td class="field field-label">
                                <span class="field-text">보고서 발행일</span>
                            </td>
                            <td class="field field-value" colspan="1">
                                <span class="field-text">{{보고서발행일}}</span>
                            </td>
                        </tr>
                    </table>

                    <!-- pitch 안내 문구: 주석 -->
                    <p class="text-pitch-note">*간격은 LED만 기입됩니다.</p>
                </div>
            </div>

            <!-- 페이지 번호 -->
            <div class="page-number"></div>
        </div>
    </section>

    <!-- 페이지 5: 주요 광고 성과 - Ⅰ -->
    <section class="page page-media-info">
        <div class="container container-media-info">
            <!-- head: 헤더 영역 -->
            <div class="frame-head">
                <!-- top title: 상단 Breadcrumb -->
                <div class="frame-top-title">
                    <!-- top title: Breadcrumb 그룹 -->
                    <div class="frame-top-title-group">
                        <span class="text-광고계약명-media">{{광고계약명}}</span>
                        <span class="text-separator-media">|</span>
                        <span class="text-목차-media">미디어그룹 상품 및 주요 광고 성과</span>
                    </div>
                    <!-- adex: 공공 미디어 중개 플랫폼 ADeX -->
                    <div class="text-platform-media">공공 미디어 중개 플랫폼 ADeX</div>
                </div>
                <!-- sub title: 타이틀 영역 -->
                <div class="frame-sub-title">
                    <h1 class="text-media-title">주요 광고 성과 - Ⅰ</h1>
                    <p class="text-media-subtitle">광고 기간 동안 수집한 데이터에 기반한 미디어그룹의 효과 지표</p>
                </div>
            </div>

            <!-- contents: 본문 영역 (Frame contents) -->
            <div class="frame-contents">
                <!-- 유동/ 노출 인구: Frame 유동/노출 인구 -->
                <div class="frame-유동노출인구">
                    <!-- content title: 유동 / 노출인구 헤더 -->
                    <div class="frame-content-title">
                        <h2 class="text-ad-info-title">유동 / 노출인구</h2>
                        <!-- 데이터 분석 정보 -->
                        <div class="frame-data-info">
                            <span class="data-info-text">수집 기간: {{광고시작일}} ~ {{광고종료일}} | 산출 기준: 유동・노출인구 총합</span>
                        </div>
                    </div>

                    <!-- table: 유동/노출 인구 테이블 -->
                    <table class="frame-table frame-table-performance">
                        <tr class="frame-18">
                            <td class="field field-label">
                                <span class="field-text">유동인구</span>
                            </td>
                            <td class="field field-value">
                                <span class="field-text">{{유동인구}}명</span>
                            </td>
                            <td class="field field-label">
                                <span class="field-text">노출인구</span>
                            </td>
                            <td class="field field-value">
                                <span class="field-text">{{노출인구}}명</span>
                            </td>
                        </tr>
                    </table>

                    <!-- insight: 인사이트 박스 -->
                    <div class="frame-insight">
                        <!-- Auto awesome: 아이콘 -->
                        <img src="insight icon.svg" alt="인사이트 아이콘" class="insight-icon">
                        <!-- Frame 1686563118: 인사이트 텍스트 컨테이너 -->
                        <div class="frame-1686563118-insight">
                                <span>유동 대비 노출 비율은 </span>
                                <!-- Frame 1686563120: 비율 텍스트 -->
                                <span class="frame-1686563120-insight">
                                    <span class="insight-value">{{노출비율}}%</span>
                                    <span>로 </span>
                                </span>
                                <!-- Frame 1686563119: 효과 수준 텍스트 -->
                                <span class="frame-1686563119-insight">
                                    <span class="insight-highlight">{{광고효과수준}} 수준의 효과</span>
                                    <span>를 보였습니다.</span>
                                </span>
                        </div>
                    </div>
                </div>

                <!-- Frame 21: 주요 오디언스 요약 -->
                <div class="frame-21">
                    <!-- content title: 주요 오디언스 요약 헤더 -->
                    <div class="frame-content-title">
                        <h2 class="text-ad-info-title">주요 오디언스 요약</h2>
                        <!-- 데이터 분석 정보 -->
                        <div class="frame-data-info">
                            <span class="data-info-text">수집 기간: {{광고시작일}} ~ {{광고종료일}} | 산출 기준: 노출인구 총합</span>
                        </div>
                    </div>

                    <!-- Frame 23: 인사이트 컨테이너 -->
                    <div class="frame-23">
                        <!-- insight: 인사이트 박스 -->
                        <div class="frame-insight frame-insight-large">
                            <!-- Frame 24: 아이콘 + 텍스트 컨테이너 -->
                            <div class="frame-24-insight">
                                <!-- Auto awesome: 아이콘 -->
                                <img src="insight icon.svg" alt="인사이트 아이콘" class="insight-icon">
                                <!-- Frame 1686563123: 다중 줄 텍스트 컨테이너 -->
                                <div class="frame-1686563123-insight">
                                    <!-- Frame 1686563118: 첫 번째 줄 -->
                                    <div class="frame-1686563118-insight">
                                        <span>주요 오디언스 </span>
                                        <span class="insight-highlight">1위는 </span>
                                        <!-- Frame 1686563120: 1위 정보 -->
                                        <span class="frame-1686563120-insight">
                                            <span class="insight-highlight">{{오디언스1위}}</span>
                                            <span class="insight-highlight">({{오디언스1위비율}}%), </span>
                                        </span>
                                        <span class="insight-highlight">2위는 </span>
                                        <!-- Frame 1686563121: 2위 정보 -->
                                        <span class="frame-1686563121-insight">
                                            <span class="insight-highlight">{{오디언스2위}}</span>
                                            <span class="insight-highlight">({{오디언스2위비율}}%), </span>
                                        </span>
                                        <span class="insight-highlight">3위는 </span>
                                        <!-- Frame 1686563122: 3위 정보 -->
                                        <span class="frame-1686563122-insight">
                                            <span class="insight-highlight">{{오디언스3위}}</span>
                                            <span class="insight-highlight">({{오디언스3위비율}}%)</span>
                                        </span>
                                        <span>입니다.</span>
                                    </div>
                                    <!-- Frame 1686563119: 두 번째 줄 -->
                                    <div class="frame-1686563119-insight">
                                        <!-- Frame 1686563120: 오디언스 정보 -->
                                        <span class="frame-1686563120-insight">
                                            <span class="frame-1686563122-insight">
                                                <span class="insight-highlight">{{오디언스1위}}</span>
                                                <span>이 가장 많은 미디어그룹은 </span>
                                            </span>
                                        </span>
                                        <span class="insight-highlight">{{최다미디어그룹}}</span>
                                        <span>입니다.</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Frame 22: 노출인구 최다 미디어그룹 -->
                <div class="frame-22">
                    <!-- content title: 노출인구 최다 미디어그룹 헤더 -->
                    <div class="frame-content-title">
                        <h2 class="text-ad-info-title">노출인구 최다 미디어그룹</h2>
                        <!-- 데이터 분석 정보 -->
                        <div class="frame-data-info">
                            <span class="data-info-text">수집 기간: {{광고시작일}} ~ {{광고종료일}} | 산출 기준: 노출인구 총합</span>
                        </div>
                    </div>

                    <!-- Frame 23: 인사이트 컨테이너 -->
                    <div class="frame-23">
                        <!-- Frame 22: 인사이트 박스 -->
                        <div class="frame-insight">
                            <!-- Frame 24: 아이콘 + 텍스트 컨테이너 -->
                            <div class="frame-24-insight">
                                <!-- Auto awesome: 아이콘 -->
                                <img src="insight icon.svg" alt="인사이트 아이콘" class="insight-icon">
                                <!-- Frame 1686563118: 인사이트 텍스트 -->
                                <div class="frame-1686563118-insight">
                                    <span>노출인구가 가장 많은 미디어그룹은 </span>
                                    <!-- Frame 1686563120: 미디어그룹 정보 -->
                                    <span class="frame-1686563120-insight">
                                        <span class="insight-highlight">{{최다미디어그룹}}</span>
                                        <span>이며, 노출인구 수는 </span>
                                    </span>
                                    <!-- Frame 1686563121: 노출인구 수 정보 -->
                                    <span class="frame-1686563121-insight">
                                        <span class="insight-highlight">{{최다노출인구수}}명</span>
                                        <span>입니다.</span>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 페이지 번호 -->
            <div class="page-number"></div>
        </div>
    </section>

    <!-- 페이지 6: 주요 광고 성과 - Ⅱ -->
    <section class="page page-media-info">
        <div class="container container-media-info">
            <!-- head: 헤더 영역 (Frame 10) -->
            <div class="frame-head">
                <!-- top title: 상단 Breadcrumb -->
                <div class="frame-top-title">
                    <!-- top title: Breadcrumb 그룹 -->
                    <div class="frame-top-title-group">
                        <span class="text-광고계약명-media">{{광고계약명}}</span>
                        <span class="text-separator-media">|</span>
                        <span class="text-목차-media">미디어그룹 상품 및 주요 광고 성과</span>
                    </div>
                    <!-- adex: 공공 미디어 중개 플랫폼 ADeX -->
                    <div class="text-platform-media">공공 미디어 중개 플랫폼 ADeX</div>
                </div>
                <!-- sub title: 타이틀 영역 (Frame 9) -->
                <div class="frame-sub-title">
                    <h1 class="text-media-title">주요 광고 성과 - Ⅱ</h1>
                    <p class="text-media-subtitle">미디어그룹 별 유동인구와 노출인구 비교</p>
                </div>
            </div>

            <!-- Frame 1686563133: 본문 영역 -->
            <div class="frame-1686563133">
                <!-- Frame 1686563131: 차트 영역 -->
                <div class="frame-1686563131">
                    <!-- Frame 21: content title -->
                    <div class="frame-content-title">
                        <h2 class="text-ad-info-title">미디어그룹 별 유동인구와 노출인구</h2>
                        <!-- 데이터 분석 정보 -->
                        <div class="frame-data-info">
                            <span class="data-info-text">수집 기간: {{광고시작일}} ~ {{광고종료일}} | 산출 기준: 유동・노출인구 총합</span>
                        </div>
                    </div>

                        <!-- Image: 차트 영역 (차트 라이브러리로 대체될 자리) -->
                        <div class="frame-chart-container" id="chart-container">
                            <canvas id="chart-canvas"></canvas>
                        </div>
                </div>

                <!-- tips: 인사이트 박스 (유사 미디어그룹 선별 안내) -->
                <div class="frame-insight frame-insight-notice">
                    <!-- tip title: 아이콘 + 제목 텍스트 -->
                    <div class="frame-24-insight frame-tip-title">
                        <!-- tip icon: 아이콘 -->
                        <img src="tips icon.svg" alt="인사이트 아이콘" class="insight-icon tip-icon">
                        <!-- 유사 미디어그룹 선별 안내: 제목 텍스트 -->
                        <span class="insight-notice-title">유사 미디어그룹 선별 안내 ({{유사미디어그룹명}})</span>
                    </div>
                    <!-- Frame 1686563118: 인사이트 텍스트 -->
                    <div class="frame-1686563118-insight frame-1686563118-notice">
                        <!-- 주요 오디언스 텍스트 -->
                        <span>주요 오디언스</span>
                        <!-- Frame 1686563120: 오디언스 정보 -->
                        <span class="frame-1686563120-insight">
                            <span class="insight-highlight">({{주요오디언스}})</span>
                        </span>
                        <!-- Frame 1686563119: 설명 텍스트 -->
                        <span class="frame-1686563119-insight">
                            <span>와 유사한 미디어그룹 중 '유동 대비 노출 비율' 이 가장 높은 상품이 선정됩니다. (해당 광고에 운영된 미디어그룹 제외)</span>
                        </span>
                    </div>
                </div>
            </div>

            <!-- 페이지 번호 -->
            <div class="page-number"></div>
        </div>
    </section>

    <!-- 페이지 7: 주요 광고 성과 - Ⅲ -->
    <section class="page page-media-info page-performance-3">
        <div class="container container-media-info">
            <!-- head: 헤더 영역 (Frame 10) -->
            <div class="frame-head">
                <!-- top title: 상단 Breadcrumb -->
                <div class="frame-top-title">
                    <!-- top title: Breadcrumb 그룹 -->
                    <div class="frame-top-title-group">
                        <span class="text-광고계약명-media">{{광고계약명}}</span>
                        <span class="text-separator-media">|</span>
                        <span class="text-목차-media">미디어그룹 상품 및 주요 광고 성과</span>
                    </div>
                    <!-- adex: 공공 미디어 중개 플랫폼 ADeX -->
                    <div class="text-platform-media">공공 미디어 중개 플랫폼 ADeX</div>
                </div>
                <!-- sub title: 타이틀 영역 (Frame 9) -->
                <div class="frame-sub-title">
                    <h1 class="text-media-title">주요 광고 성과 - Ⅲ</h1>
                    <p class="text-media-subtitle">미디어그룹 별 광고 성과 비교</p>
                </div>
            </div>

            <!-- Frame 1686563108: 본문 영역 -->
            <div class="frame-1686563108">
                <!-- Frame 20: 테이블 영역 -->
                <div class="frame-20-performance3">
                    <!-- Frame 21: content title -->
                    <div class="frame-content-title">
                        <h2 class="text-ad-info-title">미디어그룹 별 광고 성과</h2>
                        <!-- 데이터 분석 정보 -->
                        <div class="frame-data-info">
                            <span class="data-info-text">수집 기간: {{광고시작일}} ~ {{광고종료일}} | 산출 기준: 유동・노출인구 총합</span>
                        </div>
                    </div>

                    <!-- Frame 28: 테이블 -->
                    <table class="frame-table-performance3">
                        <!-- Frame 27: 테이블 헤더 -->
                        <thead>
                            <tr class="frame-27">
                                <th class="field field-label">미디어그룹명</th>
                                <th class="field field-label">유동인구</th>
                                <th class="field field-label">노출인구</th>
                                <th class="field field-label">유동 대비 노출 비율</th>
                                <th class="field field-label">CPM (노출인구 기준)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Frame 13: 일반 미디어그룹 행들 (서버에서 반복문으로 동적 생성) -->
                            <!-- 미디어그룹 수만큼 행이 동적으로 생성됩니다 -->
                            <!-- 예시: {{#each 미디어그룹리스트}} 또는 {% for item in 미디어그룹리스트 %} -->
                            <!-- 
                                서버 측 렌더링 예시 (Handlebars):
                                {{#each 미디어그룹리스트}}
                                <tr class="frame-13">
                                    <td class="field field-value">{{this.이름}}</td>
                                    <td class="field field-value">{{this.유동인구}}명</td>
                                    <td class="field field-value">{{this.노출인구}}명</td>
                                    <td class="field field-value">{{this.유동대비노출비율}}%</td>
                                    <td class="field field-value">{{this.CPM}}원</td>
                                </tr>
                                {{/each}}
                                
                                서버 측 렌더링 예시 (Jinja2):
                                {% for item in 미디어그룹리스트 %}
                                <tr class="frame-13">
                                    <td class="field field-value">{{item.이름}}</td>
                                    <td class="field field-value">{{item.유동인구}}명</td>
                                    <td class="field field-value">{{item.노출인구}}명</td>
                                    <td class="field field-value">{{item.유동대비노출비율}}%</td>
                                    <td class="field field-value">{{item.CPM}}원</td>
                                </tr>
                                {% endfor %}
                            -->
                            <!-- 현재는 임시로 하나의 행으로 표시 (서버에서 동적 생성 필요) -->
                            <tr class="frame-13">
                                <td class="field field-value">{{미디어그룹명}}</td>
                                <td class="field field-value">{{유동인구}}명</td>
                                <td class="field field-value">{{노출인구}}명</td>
                                <td class="field field-value">{{유동대비노출비율}}%</td>
                                <td class="field field-value">{{CPM}}원</td>
                            </tr>
                        </tbody>
                    </table>

                    <!-- Frame 29: 유사 미디어그룹 헤더 -->
                    <div class="frame-29">
                        <div class="field field-label frame-29-field">유사 미디어그룹</div>
                    </div>

                    <!-- Frame 28: 유사 미디어그룹 테이블 -->
                    <table class="frame-table-performance3 frame-table-similar">
                        <tbody>
                            <!-- Frame 14: 유사 미디어그룹 행 1 - 주요 오디언스가 유사한 -->
                            <!-- 서버에서 값이 없으면 invisible 처리: style="display: none;" 또는 class="invisible" 추가 -->
                            <!-- 예시: {{#if 주요오디언스유사미디어그룹}} 또는 {% if 주요오디언스유사미디어그룹 %} -->
                            <!-- 서버 측에서 조건부로 렌더링하거나, 값이 없으면 style="display: none;" 또는 class="invisible" 추가 -->
                            <tr class="frame-14-similar similar-audience">
                                <!-- Frame 16: 미디어그룹명 (2줄) -->
                                <td class="field field-value field-tall-similar">
                                    <div class="field-value-item-similar">
                                        <div class="field-text-small-similar">주요 오디언스가 유사한</div>
                                        <div class="field-text-normal">{{주요오디언스유사미디어그룹명}}</div>
                                    </div>
                                </td>
                                <td class="field field-value">{{주요오디언스유사미디어그룹유동인구}}명</td>
                                <td class="field field-value">{{주요오디언스유사미디어그룹노출인구}}명</td>
                                <td class="field field-value">{{주요오디언스유사미디어그룹유동대비노출비율}}%</td>
                                <td class="field field-value">{{주요오디언스유사미디어그룹CPM}}원</td>
                            </tr>
                            <!-- 서버 측 렌더링 예시 (Handlebars):
                                {{#if 주요오디언스유사미디어그룹}}
                                <tr class="frame-14-similar similar-audience">
                                    <td class="field field-value field-tall-similar">
                                        <div class="field-value-item-similar">
                                            <div class="field-text-small-similar">주요 오디언스가 유사한</div>
                                            <div class="field-text-normal">{{주요오디언스유사미디어그룹.이름}}</div>
                                        </div>
                                    </td>
                                    <td class="field field-value">{{주요오디언스유사미디어그룹.유동인구}}명</td>
                                    <td class="field field-value">{{주요오디언스유사미디어그룹.노출인구}}명</td>
                                    <td class="field field-value">{{주요오디언스유사미디어그룹.유동대비노출비율}}%</td>
                                    <td class="field field-value">{{주요오디언스유사미디어그룹.CPM}}원</td>
                                </tr>
                                {{/if}}
                                
                                서버 측 렌더링 예시 (Jinja2):
                                {% if 주요오디언스유사미디어그룹 %}
                                <tr class="frame-14-similar similar-audience">
                                    <td class="field field-value field-tall-similar">
                                        <div class="field-value-item-similar">
                                            <div class="field-text-small-similar">주요 오디언스가 유사한</div>
                                            <div class="field-text-normal">{{주요오디언스유사미디어그룹.이름}}</div>
                                        </div>
                                    </td>
                                    <td class="field field-value">{{주요오디언스유사미디어그룹.유동인구}}명</td>
                                    <td class="field field-value">{{주요오디언스유사미디어그룹.노출인구}}명</td>
                                    <td class="field field-value">{{주요오디언스유사미디어그룹.유동대비노출비율}}%</td>
                                    <td class="field field-value">{{주요오디언스유사미디어그룹.CPM}}원</td>
                                </tr>
                                {% endif %}
                            -->

                            <!-- Frame 14: 유사 미디어그룹 행 2 - 상품 카테고리가 유사한 -->
                            <!-- 서버에서 값이 없으면 invisible 처리: style="display: none;" 또는 class="invisible" 추가 -->
                            <!-- 예시: {{#if 상품카테고리유사미디어그룹}} 또는 {% if 상품카테고리유사미디어그룹 %} -->
                            <!-- 서버 측에서 조건부로 렌더링하거나, 값이 없으면 style="display: none;" 또는 class="invisible" 추가 -->
                            <tr class="frame-14-similar similar-category">
                                <!-- Frame 16: 미디어그룹명 (2줄) -->
                                <td class="field field-value field-tall-similar">
                                    <div class="field-value-item-similar">
                                        <div class="field-text-small-similar">상품 카테고리가 유사한</div>
                                        <div class="field-text-normal">{{상품카테고리유사미디어그룹명}}</div>
                                    </div>
                                </td>
                                <td class="field field-value">{{상품카테고리유사미디어그룹유동인구}}명</td>
                                <td class="field field-value">{{상품카테고리유사미디어그룹노출인구}}명</td>
                                <td class="field field-value">{{상품카테고리유사미디어그룹유동대비노출비율}}%</td>
                                <td class="field field-value">{{상품카테고리유사미디어그룹CPM}}원</td>
                            </tr>
                            <!-- 서버 측 렌더링 예시 (Handlebars):
                                {{#if 상품카테고리유사미디어그룹}}
                                <tr class="frame-14-similar similar-category">
                                    <td class="field field-value field-tall-similar">
                                        <div class="field-value-item-similar">
                                            <div class="field-text-small-similar">상품 카테고리가 유사한</div>
                                            <div class="field-text-normal">{{상품카테고리유사미디어그룹.이름}}</div>
                                        </div>
                                    </td>
                                    <td class="field field-value">{{상품카테고리유사미디어그룹.유동인구}}명</td>
                                    <td class="field field-value">{{상품카테고리유사미디어그룹.노출인구}}명</td>
                                    <td class="field field-value">{{상품카테고리유사미디어그룹.유동대비노출비율}}%</td>
                                    <td class="field field-value">{{상품카테고리유사미디어그룹.CPM}}원</td>
                                </tr>
                                {{/if}}
                                
                                서버 측 렌더링 예시 (Jinja2):
                                {% if 상품카테고리유사미디어그룹 %}
                                <tr class="frame-14-similar similar-category">
                                    <td class="field field-value field-tall-similar">
                                        <div class="field-value-item-similar">
                                            <div class="field-text-small-similar">상품 카테고리가 유사한</div>
                                            <div class="field-text-normal">{{상품카테고리유사미디어그룹.이름}}</div>
                                        </div>
                                    </td>
                                    <td class="field field-value">{{상품카테고리유사미디어그룹.유동인구}}명</td>
                                    <td class="field field-value">{{상품카테고리유사미디어그룹.노출인구}}명</td>
                                    <td class="field field-value">{{상품카테고리유사미디어그룹.유동대비노출비율}}%</td>
                                    <td class="field field-value">{{상품카테고리유사미디어그룹.CPM}}원</td>
                                </tr>
                                {% endif %}
                            -->
                        </tbody>
                    </table>
                </div>

                <!-- tips: 인사이트 박스 (유사 미디어그룹 선별 안내) -->
                <div class="frame-insight frame-insight-notice">
                    <!-- tip title: 아이콘 + 제목 텍스트 -->
                    <div class="frame-24-insight frame-tip-title">
                        <!-- tip icon: 아이콘 -->
                        <img src="tips icon.svg" alt="인사이트 아이콘" class="insight-icon tip-icon">
                        <!-- 유사 미디어그룹 선별 안내: 제목 텍스트 -->
                        <span class="insight-notice-title">유사 미디어그룹 선별 안내 ({{유사미디어그룹명}})</span>
                    </div>
                    <!-- Frame 1686563118: 인사이트 텍스트 -->
                    <div class="frame-1686563118-insight frame-1686563118-notice">
                        <!-- 주요 오디언스 텍스트 -->
                        <span>주요 오디언스</span>
                        <!-- Frame 1686563120: 오디언스 정보 -->
                        <span class="frame-1686563120-insight">
                            <span class="insight-highlight">({{주요오디언스}})</span>
                        </span>
                        <span>와 </span>
                        <!-- Frame 1686563119: 설명 텍스트 -->
                        <span class="frame-1686563119-insight">
                            <span>유사한 미디어그룹 중 '유동 대비 노출 비율' 이 가장 높은 상품이 선정됩니다. (해당 광고에 운영된 미디어그룹 제외)</span>
                        </span>
                    </div>
                </div>

                <!-- CPM 계산 공식 안내 -->
                <div class="frame-cpm-formula">
                    <span class="cpm-formula-text">주요 오디언스가 동일한 미디어그룹의 CPM = [(해당 미디어그룹의 일 기준 대표 광고료 × 광고 기간 일 수) ÷ 광고 기간동안의 노출인구 수] × 1,000</span>
                </div>
            </div>

            <!-- 페이지 번호 -->
            <div class="page-number"></div>
        </div>
    </section>

    <!-- 페이지 8: 주요 광고 성과 - Ⅳ-1 -->
    <section class="page page-media-info page-performance-4-1">
        <div class="container container-media-info">
            <!-- head: 헤더 영역 (Frame 10) -->
            <div class="frame-head">
                <!-- top title: 상단 Breadcrumb -->
                <div class="frame-top-title">
                    <!-- top title: Breadcrumb 그룹 -->
                    <div class="frame-top-title-group">
                        <span class="text-광고계약명-media">{{광고계약명}}</span>
                        <span class="text-separator-media">|</span>
                        <span class="text-목차-media">미디어그룹 상품 및 주요 광고 성과</span>
                    </div>
                    <!-- adex: 공공 미디어 중개 플랫폼 ADeX -->
                    <div class="text-platform-media">공공 미디어 중개 플랫폼 ADeX</div>
                </div>
                <!-- sub title: 타이틀 영역 (Frame 9) -->
                <div class="frame-sub-title">
                    <h1 class="text-media-title">주요 광고 성과 - Ⅳ</h1>
                    <p class="text-media-subtitle">연령대・성별 분포, 일 별, 요일 별, 시간대 별 노출인구를 미디어그룹 간 비교</p>
                </div>
            </div>

            <!-- Frame 1686563108: 본문 영역 -->
            <div class="frame-1686563108 frame-1686563108-performance4">
                <!-- Frame 20: 차트 영역 -->
                <div class="frame-20-performance4">
                    <!-- Frame 21: content title -->
                    <div class="frame-content-title">
                        <h2 class="text-ad-info-title">연령대・성별 분포 비교</h2>
                        <!-- 데이터 분석 정보 -->
                        <div class="frame-data-info">
                            <span class="data-info-text">수집 기간: {{광고시작일}} ~ {{광고종료일}} | 산출 기준: 노출인구 총합</span>
                        </div>
                    </div>

                    <!-- Frame 1686563136: 차트 영역 -->
                    <div class="frame-1686563136">
                        <!-- Image: 차트 영역 (차트 라이브러리로 대체될 자리) -->
                        <div class="frame-chart-container-performance4" id="chart-container-performance4-1">
                            <canvas id="chart-canvas-performance4-1"></canvas>
                        </div>

                        <!-- Container: 범례 영역 -->
                        <div class="frame-1686563137">
                            <div class="legend-item">
                                <div class="legend-icon legend-male"></div>
                                <span class="legend-text">남성</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-icon legend-female"></div>
                                <span class="legend-text">여성</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 페이지 번호 -->
            <div class="page-number"></div>
        </div>
    </section>

    <script>
        // frame-20-performance3 높이 감지 및 페이지 분할 처리
        function handlePerformance3PageBreak() {
            const frame20Elements = document.querySelectorAll('.frame-20-performance3');
            frame20Elements.forEach((frame20) => {
                // frame20의 실제 높이 계산
                const rect = frame20.getBoundingClientRect();
                const actualHeight = rect.height;
                
                // 349px 이상이면 페이지 분할 처리
                if (actualHeight >= 349) {
                    // frame-20-performance3에 클래스 추가하여 스타일 적용
                    frame20.classList.add('frame-20-performance3-extended');
                    
                    // 페이지 분할을 위한 처리
                    // CSS에서 max-height를 제거하고 page-break를 적용
                    frame20.style.maxHeight = 'none';
                    frame20.style.pageBreakInside = 'auto';
                    frame20.style.breakInside = 'auto';
                }
            });
        }
        
        // 페이지 로드 후 및 리사이즈 시 실행
        window.addEventListener('load', handlePerformance3PageBreak);
        window.addEventListener('resize', handlePerformance3PageBreak);
        
        // 미디어그룹 별 유동인구와 노출인구 차트
        // 서버 측에서 템플릿 변수를 실제 데이터로 치환해야 합니다
        const ctx = document.getElementById('chart-canvas');
        if (ctx) {
            // 서버 측 템플릿 엔진이 렌더링 시 실제 데이터로 치환됩니다
            // 미디어그룹 리스트는 서버에서 동적으로 생성됩니다
            // 예시 구조:
            // const 미디어그룹리스트 = [
            //     { 이름: '강남역 2호선 지하철 광고', 유동인구: 1300, 노출인구: 1700, 유사미디어그룹: false },
            //     { 이름: '시청역 빌딩', 유동인구: 1200, 노출인구: 800, 유사미디어그룹: false },
            //     { 이름: '홍대입구역 빌딩', 유동인구: 1600, 노출인구: 900, 유사미디어그룹: false },
            //     { 이름: '이대역 빌딩', 유동인구: 1100, 노출인구: 1400, 유사미디어그룹: true }
            // ];
            
            // 서버 측에서 미디어그룹 리스트를 JavaScript 배열로 렌더링
            // Handlebars 예시: const 미디어그룹리스트 = [{{#each 미디어그룹리스트}}{이름: '{{this.이름}}', 유동인구: {{this.유동인구}}, 노출인구: {{this.노출인구}}, 유사미디어그룹: {{this.유사미디어그룹}}}{{#unless @last}},{{/unless}}{{/each}}];
            // Jinja2 예시: const 미디어그룹리스트 = [{% for item in 미디어그룹리스트 %}{이름: '{{item.이름}}', 유동인구: {{item.유동인구}}, 노출인구: {{item.노출인구}}, 유사미디어그룹: {{item.유사미디어그룹|lower}}}{% if not loop.last %},{% endif %}{% endfor %}];
            
            // 임시 데이터 (서버에서 위의 템플릿으로 치환)
            const 미디어그룹리스트 = [
                { 이름: '강남역 2호선 지하철 광고', 유동인구: 1300, 노출인구: 1700, 유사미디어그룹: false },
                { 이름: '시청역 빌딩', 유동인구: 1200, 노출인구: 800, 유사미디어그룹: false },
                { 이름: '홍대입구역 빌딩', 유동인구: 1600, 노출인구: 900, 유사미디어그룹: false },
                { 이름: '이대역 빌딩', 유동인구: 1100, 노출인구: 1400, 유사미디어그룹: true }
            ];
            
            // 동적으로 labels, data, colors 생성
            const labels = 미디어그룹리스트.map(item => item.이름);
            const 유동인구데이터 = 미디어그룹리스트.map(item => item.유동인구);
            const 노출인구데이터 = 미디어그룹리스트.map(item => item.노출인구);
            
            // 색상 설정: 일반 미디어그룹은 기본 색상, 유사 미디어그룹은 연한 색상
            const 유동인구배경색 = 미디어그룹리스트.map(item => item.유사미디어그룹 ? '#B0D0F0' : '#7FECD3');
            const 노출인구배경색 = 미디어그룹리스트.map(item => item.유사미디어그룹 ? '#90E6B3' : '#00CF75');
            
            // Y축 최대값 동적 계산 (최대값의 1.2배로 설정, 500 단위로 반올림)
            const maxValue = Math.max(...유동인구데이터, ...노출인구데이터);
            const yAxisMax = Math.ceil(maxValue * 1.2 / 500) * 500;
            
            const chartData = {
                labels: labels,
                datasets: [
                    {
                        label: '유동인구',
                        data: 유동인구데이터,
                        backgroundColor: 유동인구배경색,
                        borderColor: 유동인구배경색,
                        borderWidth: 0,
                        borderRadius: 4, // 둥근 상단
                        borderSkipped: false
                    },
                    {
                        label: '노출인구',
                        data: 노출인구데이터,
                        backgroundColor: 노출인구배경색,
                        borderColor: 노출인구배경색,
                        borderWidth: 0,
                        borderRadius: 4, // 둥근 상단
                        borderSkipped: false
                    }
                ]
            };

            new Chart(ctx, {
                type: 'bar',
                data: chartData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true, // 범례 표시
                            position: 'bottom', // 범례를 하단으로
                            align: 'center',
                            labels: {
                                usePointStyle: false,
                                padding: 20,
                                font: {
                                    family: 'Pretendard',
                                    size: 10,
                                    weight: 400
                                },
                                color: '#757575',
                                generateLabels: function(chart) {
                                    const original = Chart.defaults.plugins.legend.labels.generateLabels;
                                    const labels = original.call(this, chart);
                                    // 범례 색상 설정
                                    labels.forEach((label, index) => {
                                        if (index === 0) {
                                            label.fillStyle = '#7FECD3'; // 유동인구
                                        } else if (index === 1) {
                                            label.fillStyle = '#00CF75'; // 노출인구
                                        }
                                    });
                                    return labels;
                                }
                            }
                        },
                        tooltip: {
                            enabled: true,
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            titleColor: '#ffffff',
                            bodyColor: '#ffffff',
                            borderColor: '#ffffff',
                            borderWidth: 1,
                            padding: 12,
                            titleFont: {
                                family: 'Pretendard',
                                size: 12,
                                weight: 600
                            },
                            bodyFont: {
                                family: 'Pretendard',
                                size: 12,
                                weight: 400
                            }
                        },
                        datalabels: {
                            display: true,
                            color: '#616161',
                            font: {
                                family: 'Pretendard',
                                size: 12,
                                weight: 600 // 볼드체
                            },
                            anchor: 'end',
                            align: 'top',
                            offset: 4,
                            formatter: function(value) {
                                return value.toLocaleString() + '명';
                            }
                        }
                    },
                    scales: {
                        x: {
                            stacked: false,
                            grid: {
                                display: false
                            },
                            ticks: {
                                color: '#616161',
                                font: {
                                    family: 'Pretendard',
                                    size: 12,
                                    weight: 400
                                },
                                maxRotation: 0,
                                minRotation: 0,
                                padding: 8
                            }
                        },
                        y: {
                            beginAtZero: true,
                            max: yAxisMax, // 동적으로 계산된 최대값
                            ticks: {
                                stepSize: 500,
                                color: '#616161',
                                font: {
                                    family: 'Pretendard',
                                    size: 12,
                                    weight: 400
                                },
                                callback: function(value) {
                                    return value.toLocaleString();
                                },
                                padding: 8
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)',
                                lineWidth: 1,
                                drawBorder: false
                            }
                        }
                    },
                    layout: {
                        padding: {
                            top: 10,
                            bottom: 10,
                            left: 10,
                            right: 10
                        }
                    },
                    categoryPercentage: 0.6, // 카테고리 간격
                    barPercentage: 0.8 // 그룹 내 막대 간격
                },
                plugins: [{
                    id: 'datalabels',
                    afterDraw: function(chart) {
                        // Chart.js datalabels plugin이 없을 경우를 대비한 수동 라벨 표시
                        const ctx = chart.ctx;
                        chart.data.datasets.forEach((dataset, i) => {
                            const meta = chart.getDatasetMeta(i);
                            meta.data.forEach((bar, index) => {
                                const value = dataset.data[index];
                                const x = bar.x;
                                const y = bar.y - 5;
                                
                                ctx.save();
                                ctx.fillStyle = '#616161';
                                ctx.font = '600 12px Pretendard'; // 볼드체
                                ctx.textAlign = 'center';
                                ctx.textBaseline = 'bottom';
                                ctx.fillText(value.toLocaleString() + '명', x, y - 4);
                                ctx.restore();
                            });
                        });
                    }
                }]
            });
        }
    </script>
</body>
</html>

